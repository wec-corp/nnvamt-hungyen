"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2512],{32512:function(a,t,e){e.r(t),e.d(t,{default:function(){return w}});var n=e(85893),i=e(67294),l=e(68573),s=e(96788),h=e(93454),d=e(88539),o=e(60990),r=e(94395),c=e(39892),u=e(95587),m=e(448),x=e(64577),j=e(82431),v=e(27776),p=e(21773),f=e(68963),Z=e(88148),g=e(55201),b=e(53839),P=e(40492),C=e(51015),y=e(52857),T=e(50720),k=e(17389),V=e(27484),S=e.n(V),G=e(10586);let W={soVanBan:"",thoiGian:null,tienPhat:0,dot:"",donVi:"",ghiChu:"",taiLieu:null,daXoa:!1,fileUpload:null};var N=e(49051);let B=a=>{var t;let{data:e,setPostSuccess:h,closeDialogs:d}=a,[r,c]=(0,i.useState)({id:(null==e?void 0:e.id)||0,soVanBan:(null==e?void 0:e.soVanBan)||"",thoiGian:S()(null==e?void 0:e.thoiGian)||null,tienPhat:(null==e?void 0:e.tienPhat)||0,dot:(null==e?void 0:e.dot)||"",donVi:(null==e?void 0:e.donVi)||"",ghiChu:(null==e?void 0:e.ghiChu)||"",taiLieu:(null==e?void 0:e.taiLieu)||null,daXoa:!1}),[u,m]=(0,i.useState)(),j=a=>t=>{let e="checkbox"===t.target.type?t.target.checked:t.target.value;c({...r,[a]:e})},v=a=>{var t;m((null===(t=a.target.files)||void 0===t?void 0:t[0])||null)},g=async a=>{a.preventDefault(),(async()=>{var a,t,e,n,i;let l={...r,thoiGian:null===(a=r.thoiGian)||void 0===a?void 0:a.toDate(),taiLieu:"pdf/thanh-tra-kiem-tra/".concat(null===(t=r.thoiGian)||void 0===t?void 0:t.year(),"/").concat(null===(e=r.soVanBan)||void 0===e?void 0:e.replace(/\//g,"_").toLowerCase(),".pdf")},s={filePath:"pdf/thanh-tra-kiem-tra/".concat(null===(n=l.thoiGian)||void 0===n?void 0:n.getFullYear()),fileName:"".concat(null===(i=r.soVanBan)||void 0===i?void 0:i.replace(/\//g,"_").toLowerCase(),".pdf"),file:u};try{await (0,x.saveData)("thanh-tra-kiem-tra/luu",l)&&(await (0,x.uploadFile)(u,s.filePath,s.fileName),c(W),"function"==typeof h&&h(!0),d())}catch(a){console.log(a)}finally{}})()};return(0,n.jsx)("form",{onSubmit:g,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(l.ZP,{container:!0,spacing:4,py:2,children:[(0,n.jsx)(l.ZP,{item:!0,md:12,children:(0,n.jsx)(P.Z,{name:"soVanBan",fullWidth:!0,label:"Số băn bản",placeholder:"Số băn bản",size:"small",value:r.soVanBan,onChange:j("soVanBan")})}),(0,n.jsx)(l.ZP,{item:!0,md:12,children:(0,n.jsx)(P.Z,{name:"dot",fullWidth:!0,label:"Đợt thanh tra",placeholder:"Đợt thanh tra",size:"small",value:r.dot,onChange:j("dot")})}),(0,n.jsx)(l.ZP,{item:!0,md:12,children:(0,n.jsx)(P.Z,{name:"donVi",fullWidth:!0,label:"Đơn vị thanh tra",placeholder:"Đơn vị thanh tra",size:"small",value:r.donVi,onChange:j("donVi")})}),(0,n.jsx)(l.ZP,{item:!0,md:6,children:(0,n.jsx)(T._,{dateAdapter:G.y,children:(0,n.jsx)(k.M,{value:S()(r.thoiGian),onChange:a=>j("thoiGian")(a.toDate()),slotProps:{textField:{size:"small",fullWidth:!0}},label:"Ng\xe0y thanh tra",format:"DD/MM/YYYY"})})}),(0,n.jsx)(l.ZP,{item:!0,md:6,children:(0,n.jsx)(P.Z,{name:"tienPhat",fullWidth:!0,label:"Tổng tiền phạt",placeholder:"Tổng tiền phạt",size:"small",value:r.tienPhat,onChange:j("tienPhat")})}),(0,n.jsx)(l.ZP,{item:!0,md:12,children:(0,n.jsx)(P.Z,{name:"ghiChu",fullWidth:!0,multiline:!0,label:"Ghi ch\xfa",placeholder:"Ghi ch\xfa",size:"small",value:r.ghiChu,onChange:j("ghiChu")})}),(0,n.jsxs)(l.ZP,{item:!0,md:12,children:[r.fileUpload&&(0,n.jsx)(s.Z,{mb:3,children:null===(t=r.fileUpload)||void 0===t?void 0:t.name}),(0,n.jsxs)(C.Z,{fullWidth:!0,className:"uploadBtn",component:"label",variant:"contained",startIcon:(0,n.jsx)(p.Z,{}),href:"#file-upload-licFee",children:["Văn bản kết luận thanh tra",(0,n.jsx)(N.b,{type:"file",onChange:a=>v(a),accept:".pdf"})]})]})]}),(0,n.jsxs)(l.ZP,{item:!0,sx:{display:"flex",justifyContent:"end",py:2},children:[(0,n.jsx)(C.Z,{startIcon:(0,n.jsx)(f.Z,{}),sx:{ml:1},variant:"outlined",color:"primary",type:"submit",children:"Lưu"}),(0,n.jsx)(C.Z,{startIcon:(0,n.jsx)(Z.Z,{}),sx:{ml:1},variant:"outlined",color:"error",onClick:()=>{c(W),d()},children:"Huỷ"})]})]})})};var D=a=>{let{data:t,isEdit:e,setPostSuccess:i}=a,l=e?"Thay đổi th\xf4ng tin thanh tra - kiểm tra":"Th\xeam thanh tra - kiểm tra";return(0,n.jsx)(v.Z,{children:(a,s)=>(0,n.jsx)(o.Z,{children:e?(0,n.jsx)(y.Z,{onClick:()=>a((0,n.jsx)(B,{data:t,setPostSuccess:i,isEdit:e,closeDialogs:s}),l),children:(0,n.jsx)(g.Z,{className:"tableActionBtn"})}):(0,n.jsx)(C.Z,{size:"small",startIcon:(0,n.jsx)(b.Z,{}),onClick:()=>a((0,n.jsx)(B,{data:t,setPostSuccess:i,isEdit:e,closeDialogs:s}),l),children:"Th\xeam mới"})})})},w=()=>{let[a,t]=(0,i.useState)(!1),e=()=>{t(a=>!a)},[v,p]=(0,i.useState)([]),[f,Z]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{Z(!0);try{let a=await (0,x.getData)("thanh-tra-kiem-tra/danh-sach");p(a)}catch(a){p([])}finally{Z(!1)}})()},[a]),(0,n.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,className:"text-center",children:(0,n.jsx)(s.Z,{className:"font-weight-bold",variant:"h6",children:"THỐNG K\xca KẾT QUẢ THANH TRA - KIỂM TRA"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,n.jsxs)(h.Z,{elevation:3,sx:{p:0,height:"100%"},children:[(0,n.jsx)(d.Z,{variant:"dense",children:(0,n.jsxs)(l.ZP,{container:!0,spacing:2,justifyContent:"end",children:[(0,n.jsx)(l.ZP,{item:!0,children:(0,n.jsx)(j.Z,{tableId:"Inspect-data",filename:"ThanhTraKiemTra"})}),(0,n.jsx)(l.ZP,{item:!0,children:(0,n.jsx)(D,{setPostSuccess:e,isEdit:!1})})]})}),(0,n.jsx)(c.Z,{id:"Inspect-data",columns:[{id:"stt",label:"STT",minWidth:90},{id:"soVanBan",label:"Số văn bản",minWidth:250,pinned:"left",elm:a=>(0,n.jsx)(u.Z,{name:null==a?void 0:a.soQDTCQ,src:null==a?void 0:a.filePDF})},{id:"dot",label:"Đợt thanh tra",minWidth:180},{id:"donVi",label:"Đơn vị thanh tra",minWidth:180},{id:"thoiGan",label:"Thời gian thanh tra",minWidth:180,elm:a=>(0,r.p6)(a.ngayKy)},{id:"tienPhat",label:"Tổng số tiền phạt vi phạm h\xe0nh ch\xednh",elm:a=>(0,r.ao)(a.tienPhat)},{id:"ghiChu",minWidth:280,label:"Ghi ch\xfa"},{id:"actions",label:"Thao t\xe1c",pinned:"right"}],rows:v,loading:f,pagination:!0,actions:a=>(0,n.jsxs)(o.Z,{className:"group_btn",children:[(0,n.jsx)(D,{isEdit:!0,data:a,setPostSuccess:e}),(0,n.jsx)(m.Z,{url:"thanh-tra-kiem-tra",data:a,setPostSuccess:e})]})})]})})]})}}}]);