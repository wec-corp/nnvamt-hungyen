"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1686],{31686:function(e,n,a){a.r(n);var i=a(85893),t=a(67294),l=a(68573),r=a(96788),s=a(6897),h=a(94143),d=a(29346),c=a(15972),x=a(12166),o=a(32200),u=a(39892),b=a(64577),g=a(8897),j=a(65749);n.default=()=>{let[e,n]=(0,t.useState)([]),[a]=(0,t.useState)("all"),[p,m]=(0,t.useState)("OpenWeatherMap"),[f,v]=(0,t.useState)(["Cửa van 1","Cửa van 2","Cửa van 3","Cửa van 4"]),[y,W]=(0,t.useState)(!1),Z=(0,t.useCallback)(async()=>{W(!0);try{let e=await (0,b.getData)("lich-su-du-bao?nguonDB=".concat(p,"&thoiGianDB=").concat(a));if(!e)return;let i=(e=>{if(e.length<2)return 1;let n=e.map(e=>{let[n]=e.gio.split(":").map(Number);return n}),a=n[1]-n[0];return Math.abs(a)||1})(e),t=(0,j.d)(null==e?void 0:e.map(e=>({Ngay:e.ngay,Gio:e.gio,Qtdo:e.Qtdo,Xtb:e.xtbDakdrinh})),i,420),l=e.map((e,n)=>({...e,drinh_luongmuatb:e.xtbDakdrinh,drinhqdenho_Qp:t[n].Qtt.toFixed(2)}));n(l)}catch(e){console.error("Lỗi khi lấy dữ liệu từ ".concat(p,":"),e)}finally{W(!1)}},[p,a]);(0,t.useEffect)(()=>{Z()},[Z]);let C=[{id:"stt",label:"STT",align:"center"},{id:"ngay",label:"Ng\xe0y",align:"center"},{id:"gio",label:"Giờ",align:"center"},{id:"BD",label:"DỰ B\xc1O C\xc1C TH\xd4NG SỐ HỒ CHỨA ĐĂK ĐRINH",colspan:10,children:[{id:"drinhqdenho_Qp",label:(0,i.jsxs)("span",{children:["Dự b\xe1o ",(0,i.jsx)("br",{})," lưu lượng ",(0,i.jsx)("br",{})," đến hồ ",(0,i.jsx)("br",{})," (m3/s)"]}),align:"center",minWidth:100},{id:"drinhqdenho_Tp",label:(0,i.jsxs)("span",{children:["Dự b\xe1o ",(0,i.jsx)("br",{})," thời gian ",(0,i.jsx)("br",{})," xuất hiện ",(0,i.jsx)("br",{})," đỉnh lũ ",(0,i.jsx)("br",{})," về hồ"]}),align:"center",minWidth:100},{id:"drinhMNTL",label:(0,i.jsxs)("span",{children:["Dự b\xe1o ",(0,i.jsx)("br",{})," mực nước ",(0,i.jsx)("br",{})," hồ ",(0,i.jsx)("br",{})," (m)"]}),align:"center",minWidth:100},{id:"drinhMNHL",label:(0,i.jsxs)("span",{children:["Dự b\xe1o ",(0,i.jsx)("br",{})," mực nước ",(0,i.jsx)("br",{})," hạ lưu ",(0,i.jsx)("br",{})," (m)"]}),align:"center",minWidth:100},{id:"Luuluongxa",label:(0,i.jsx)("span",{children:" Dự kiến lưu lượng về hạ du (m3/s)"}),colspan:4,children:[{id:"Qchaymay",label:(0,i.jsxs)("span",{children:["Tổng Q ",(0,i.jsx)("br",{})," về hạ du ",(0,i.jsx)("br",{})]}),align:"center",minWidth:80},{id:"Qchaymay",label:(0,i.jsxs)("span",{children:["Q ",(0,i.jsx)("br",{})," chạy m\xe1y ",(0,i.jsx)("br",{})]}),align:"center",minWidth:80},{id:"Qxatran",label:(0,i.jsxs)("span",{children:["Q ",(0,i.jsx)("br",{})," xả qua tr\xe0n ",(0,i.jsx)("br",{})]}),align:"center",minWidth:80},{id:"Qxatran",label:(0,i.jsxs)("span",{children:["Q ",(0,i.jsx)("br",{})," xả tối thiểu ",(0,i.jsx)("br",{})]}),align:"center",minWidth:80}]},{id:"socuaxasau",label:(0,i.jsxs)("span",{children:["Số cửa ",(0,i.jsx)("br",{})," xả s\xe2u ",(0,i.jsx)("br",{})]}),align:"center",minWidth:100},{id:"socuaxamat",label:(0,i.jsxs)("span",{children:["Số cửa ",(0,i.jsx)("br",{})," xả mặt ",(0,i.jsx)("br",{})]}),align:"center",minWidth:100}]},{id:"ghichu",label:"Thao t\xe1c",align:"center",minWidth:100}];return(0,i.jsxs)(l.ZP,{children:[(0,i.jsx)(r.Z,{variant:"caption",sx:{color:"red",fontWeight:"bold",fontSize:"9pt"},children:"DỰ B\xc1O C\xc1C TH\xd4NG SỐ VẬN H\xc0NH HỒ CHỨA"}),(0,i.jsxs)(l.ZP,{container:!0,spacing:5,padding:5,children:[(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsxs)(s.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{sx:{fontWeight:"bold",color:"#0077dd",fontSize:18},children:"Nguồn dự b\xe1o mưa"}),(0,i.jsx)(d.Z,{value:p,onChange:e=>m(e.target.value),label:"Nguồn dự b\xe1o mưa...................'",children:["OpenWeatherMap","Windy","Tomorrow.io","VRAIN","ECMWF","Halex","GFS","Blue","ETA","AI"].map(e=>(0,i.jsx)(c.Z,{value:e,children:"Nguồn dự b\xe1o ".concat(e)},e))})]})}),(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsxs)(s.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{sx:{fontWeight:"bold",color:"#0077dd",fontSize:18},children:"Mở cửa van"}),(0,i.jsx)(d.Z,{multiple:!0,value:f,onChange:e=>v("string"==typeof e.target.value?[e.target.value]:e.target.value),label:"Mở cửa van...........",renderValue:e=>e.join(", "),children:["Cửa van 1","Cửa van 2","Cửa van 3","Cửa van 4"].map(e=>(0,i.jsxs)(c.Z,{value:e,children:[(0,i.jsx)(x.Z,{checked:f.indexOf(e)>-1}),(0,i.jsx)(o.Z,{primary:e})]},e))})]})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,children:(0,i.jsx)(g.Z,{})})]}),(0,i.jsx)(u.Z,{id:"bang_mua_du_bao",columns:C,rows:e,loading:y,pagination:!0}),(0,i.jsx)(r.Z,{sx:{fontWeight:600,fontSize:"1.0rem",color:"blue",display:"flex",alignItems:"center"},children:"Ghi ch\xfa: Tổng lưu lượng xả = Q xả qua tr\xe0n + Q chạy m\xe1y + Q xả tối thiểu"})]})}},65749:function(e,n,a){a.d(n,{d:function(){return i}});function i(e,n,a){let i=0,t=0,l=0,r=0,s=0;return e.map(e=>{let h=i+e.Xtb,d=h>.435?.435:h,c=.435<h?0:d+t/250*.435>=.435?.435-d:.435*t/250,x=d+c,o=h-x>0?h-x:0,u=t/250<=.5?0:(t/250-.5)/.5*(o/45),b=o>u?o-u:0,g=b>.5?b-.5:0,j=g>0?.5:b,p=t/250<=.2?0:.98*(t/250-.2)*g/.8,m=t/250<=.9?0:(t/250-.9)/.09999999999999998*(g-p),f=0===g?0:g-p-m>0?g-p-m:0,v=t+f-u-c>250?250:t+f-u-c,y=p*(1-Math.exp(-.8))+l*Math.exp(-.8),W=u*(1-Math.exp(-2.4))+r*Math.exp(-2.4),Z=m*(1-Math.exp(-2.4))+s*Math.exp(-2.4),C=y+W+Z;return i=j,t=v,l=y,r=W,s=Z,{ngay:e.Ngay,gio:e.Gio,xtb:e.Xtb,e:.87,Ep:.435,U1:h,Emat:d,Esm:c,E1:x,U2:o,QIF:u,U3:b,PN:g,Uc:j,QOF:p,G:m,DL:f,Lc:v,OF:y,IF:W,BF:Z,Qsum:C,Qtt:1e3*a*C/(3600*n)}})}},8897:function(e,n,a){var i=a(85893),t=a(96788),l=a(67294);n.Z=()=>{let[e,n]=(0,l.useState)(new Date);return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(e)},[]),(0,i.jsxs)(t.Z,{sx:{fontWeight:600,fontSize:"0.875rem",color:"blue",display:"flex",alignItems:"center",py:4},children:[(0,i.jsx)("img",{src:"/images/icon/live.gif",width:25,height:20,alt:"live"}),"\xa0Thời gian hiện tại: ",e.toLocaleString("zh-HK",{hour12:!1})]})}}}]);