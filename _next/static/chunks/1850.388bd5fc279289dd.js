"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1850],{46482:function(e,n,t){t.d(n,{c:function(){return a}});var i=t(85893);function a(e,n){let t=e-n;return null==e||null==n?(0,i.jsx)("span",{style:{fontWeight:"bold",color:"green"},children:"0.00"}):t<0?(0,i.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:parseFloat(t.toFixed(2))}):(0,i.jsx)("span",{style:{fontWeight:"bold",color:"green"},children:parseFloat(t.toFixed(2))})}},94395:function(e,n,t){t.d(n,{ao:function(){return i},o0:function(){return l},p6:function(){return a}});let i=e=>null!=e?e.toLocaleString("en-US"):"",a=e=>{if(null!=e){let n=new Date(e),t=10>n.getDate()?"0"+n.getDate():n.getDate(),i=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getFullYear();return"".concat(t,"/").concat(i,"/").concat(a)}return""},l=e=>{if(null!=e){let n=new Date(e),t=10>n.getDate()?"0"+n.getDate():n.getDate(),i=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getFullYear(),l=10>n.getHours()?"0"+n.getHours():n.getHours(),s=10>n.getMinutes()?"0"+n.getMinutes():n.getMinutes(),r=10>n.getSeconds()?"0"+n.getSeconds():n.getSeconds();return"".concat(t,"/").concat(i,"/").concat(a," ").concat(l,":").concat(s,":").concat(r)}return""}},77584:function(e,n){n.Z=e=>{if(!e)return 0;switch(e){case"nuoc-mat":return 1;case"nuoc-duoi-dat":return 2;case"ktsd-nuoc-duoi-dat":return 7;case"td-nuoc-duoi-dat":return 8;case"hnk-nuoc-duoi-dat":return 9;case"xa-thai":return 3;default:return 0}}},14953:function(e,n,t){var i=t(85893),a=t(60990);t(67294),n.Z=e=>{var n,t,l,s;let r,{data:c}=e;return r=c.IsError||(null===(n=c.thongso)||void 0===n?void 0:n.hThuongLuu)<c.hThuongLuuTT||(null===(t=c.thongso)||void 0===t?void 0:t.qmaxNM)<c.qMaxTT||(null===(l=c.thongso)||void 0===l?void 0:l.qXaTran)<c.qXaTranTT||(null===(s=c.thongso)||void 0===s?void 0:s.qtt)<c.qMinTT?(0,i.jsx)("div",{className:"license_status hsd-warning",children:"Vận h\xe0nh chưa đ\xfang"}):c.IsDisconnect?(0,i.jsx)("div",{className:"license_status hsd-danger",children:"Kh\xf4ng c\xf3 số liệu"}):(0,i.jsx)("div",{className:"license_status hsd-success",children:"Đang vận h\xe0nh"}),(0,i.jsx)(a.Z,{children:r})}},38138:function(e,n,t){var i=t(85893),a=t(67294),l=t(75486),s=t(84166),r=t(88196),c=t(36795),o=t(88539),h=t(96788),u=t(51015),d=t(40110),m=t(95639);let x=a.forwardRef(function(e,n){return(0,i.jsx)(l.Z,{direction:"left",ref:n,...e})});n.Z=e=>{let{children:n}=e,[t,l]=(0,a.useState)(null),[g,j]=(0,a.useState)(null),[T,Z]=(0,a.useState)(!1),p=()=>{l(null),j(null),Z(!1)};return(0,i.jsxs)(s.Z,{children:[n((e,n)=>{l(e),j(n),Z(!0)},p),(0,i.jsx)(r.Z,{open:T,onClose:p,fullScreen:!0,TransitionComponent:x,sx:{zIndex:1201},children:t&&(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(c.Z,{sx:{position:"relative"},children:(0,i.jsxs)(o.Z,{sx:{maxHeight:45,minHeight:45,position:"sticky",top:0},children:[(0,i.jsx)(h.Z,{sx:{ml:2,flex:1,color:"#fff"},variant:"h6",component:"div",children:g}),(0,i.jsx)(u.Z,{className:"btn closeBtn",sx:{p:2,mr:-2},onClick:p,children:(0,i.jsx)(m.Z,{})})]})}),(0,i.jsx)(d.Z,{children:t})]})})]})}},42539:function(e,n,t){t.d(n,{D:function(){return a}});var i=t(57679);let a=(e,n)=>{var t,a;if(n>=-180&&n<=180&&e>=-90&&e<=90)return[e,n];i.Z.defs("VN2000_QUANG_NGAI","+proj=tmerc +lat_0=0 +lon_0=108.000 +k=0.9999 +x_0=500000 +y_0=0 +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +units=m +no_defs");let l=i.Z.defs("VN2000_QUANG_NGAI"),s=i.Z.defs("EPSG:4326"),r=l&&(null===(t=l.units)||void 0===t?void 0:t.to_meter)||1,c=s&&(null===(a=s.units)||void 0===a?void 0:a.to_meter)||1,o=i.Z.toPoint([e/r,n/r]),h=(0,i.Z)(l,s).forward(o);return h.x*=c.toFixed(8),h.y*=c.toFixed(8),[h.y,h.x]}},85626:function(e,n,t){t.d(n,{R:function(){return i}});let i={"nuoc-mat":{columnVisibilityMap:{4:["soLuongMayBom","qThietKe","qThucTe","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"],5:["soLuongMayBom","qThietKe","qThucTe","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"],6:["capCT","dienTichLuuVuc","muaTrungBinhNam","qTrungBinhNam","congSuatDamBao","chieuCaoDap","chieuDaiDap","caoTrinhDap","qmaxNM","qtt","qDamBao","hmax","hmin","htoiThieu","mnc","mndbt","mnltk","mnlkt","dungTichToanBo","dungTichChet","dungTichHuuIch","qThietKe"],10:["capCT","dienTichLuuVuc","muaTrungBinhNam","qTrungBinhNam","congSuatDamBao","chieuCaoDap","chieuDaiDap","caoTrinhDap","qmaxNM","qtt","qDamBao","hmax","hmin","htoiThieu","mnc","mndbt","mnltk","mnlkt","dungTichToanBo","dungTichChet","dungTichHuuIch","soLuongMayBom","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"],default:["capCT","dienTichLuuVuc","muaTrungBinhNam","qTrungBinhNam","congSuatLM","congSuatDamBao","chieuCaoDap","chieuDaiDap","caoTrinhDap","qmaxNM","qtt","qDamBao","hmax","hmin","htoiThieu","mnc","mndbt","mnltk","mnlkt","dungTichToanBo","dungTichChet","dungTichHuuIch","soLuongMayBom","qThietKe","qThucTe","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"]}},"nuoc-duoi-dat":{columnVisibilityMap:{default:["capCT","dienTichLuuVuc","muaTrungBinhNam","qTrungBinhNam","congSuatLM","congSuatDamBao","chieuCaoDap","chieuDaiDap","caoTrinhDap","qmaxNM","qtt","qDamBao","hmax","hmin","htoiThieu","mnc","mndbt","mnltk","mnlkt","dungTichToanBo","dungTichChet","dungTichHuuIch","soLuongMayBom","qThietKe","qThucTe","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"]}},"xa-thai":{columnVisibilityMap:{default:["capCT","dienTichLuuVuc","muaTrungBinhNam","qTrungBinhNam","congSuatLM","congSuatDamBao","chieuCaoDap","chieuDaiDap","caoTrinhDap","qmaxNM","qtt","qDamBao","hmax","hmin","htoiThieu","mnc","mndbt","mnltk","mnlkt","dungTichToanBo","dungTichChet","dungTichHuuIch","soLuongMayBom","qThietKe","qThucTe","dienTichTuoiThietKe","dienTichTuoiThucTe","thoiGianBomTB","thoiGianBomNhoNhat","thoiGianBomLonNhat"]}}}},82436:function(e,n,t){t.d(n,{Z:function(){return D}});var i=t(85893),a=t(67294),l=t(93454),s=t(47687),r=t(11163),c=t(85626),o=t(39892),h=t(77584),u=t(38855),d=t(53525),m=t(88539),x=t(68573),g=t(40492),j=t(6897),T=t(94143),Z=t(29346),p=t(15972),C=t(4989),v=t(51015),N=t(64577),U=e=>{var n,t,l,s,c,o;let{onChange:U}=e,f=(0,r.useRouter)(),[y,D]=(0,a.useState)([]),[b,L]=(0,a.useState)({tenct:"",loai_ct:(0,h.Z)(null===(n=f.query)||void 0===n?void 0:n.type),huyen:0,xa:0,song:0,luuvuc:0,tieu_luuvuc:0,tang_chuanuoc:0,nguonnuoc_kt:""}),S=e=>n=>{e&&((null==e?void 0:e.target)?L(t=>({...t,[n]:e.target.value})):L(t=>({...t,[n]:e})))};return(0,a.useEffect)(()=>{let e=!0;return(async()=>{try{var n;let t=await N.masterDataCache.getLoaiCongTrinh(),i=null===(n=f.query)||void 0===n?void 0:n.type;"nuoc-mat"===i?t=t.filter(e=>1===e.idCha):"nuoc-duoi-dat"===i?t=t.filter(e=>2===e.idCha):"xa-thai"===i&&(t=t.filter(e=>3===e.idCha)),e&&D(t)}catch(e){console.log(e)}})(),()=>{e=!1}},[b.huyen,f.query]),(0,i.jsx)(m.Z,{variant:"dense",children:(0,i.jsxs)(x.ZP,{container:!0,spacing:2,sx:{paddingY:3},children:[(0,i.jsx)(x.ZP,{item:!0,xs:12,md:3,py:0,children:(0,i.jsx)(g.Z,{sx:{p:0},size:"small",fullWidth:!0,variant:"outlined",placeholder:"T\xean c\xf4ng tr\xecnh...",onChange:e=>S(e)("tenct")})}),(0,i.jsx)(x.ZP,{item:!0,xs:12,md:2,py:0,children:(0,i.jsxs)(j.Z,{size:"small",fullWidth:!0,children:[(0,i.jsx)(T.Z,{id:"license-type-select",children:"Loại c\xf4ng tr\xecnh"}),(0,i.jsxs)(Z.Z,{labelId:"license-type-select",id:"demo-select-small",value:b.loai_ct>3?b.loai_ct:(0,h.Z)(null===(t=f.query)||void 0===t?void 0:t.type),label:"Loại c\xf4ng tr\xecnh",onChange:e=>S(e)("loai_ct"),children:[(0,i.jsx)(p.Z,{value:(0,h.Z)(null===(l=f.query)||void 0===l?void 0:l.type),children:"Loại c\xf4ng tr\xecnh"}),(null===(s=f.query)||void 0===s?void 0:s.type)=="nuoc-mat"||(null===(c=f.query)||void 0===c?void 0:c.type)=="nuoc-duoi-dat"||(null===(o=f.query)||void 0===o?void 0:o.type)=="xa-thai"?y.filter(e=>void 0!==e).map((e,n)=>(0,i.jsx)(p.Z,{value:e.id,children:e.tenLoaiCT},n)):y.filter(e=>null==e?void 0:e.children).map((e,n)=>[(0,i.jsx)(C.Z,{children:e.tenLoaiCT},"subheader-".concat(n)),...e.children.map((e,n)=>(0,i.jsx)(p.Z,{value:e.id,children:e.tenLoaiCT},"child-".concat(n)))])]})]})}),(0,i.jsx)(x.ZP,{item:!0,xs:6,md:1.5,py:0,children:(0,i.jsx)(v.Z,{variant:"outlined",size:"small",fullWidth:!0,startIcon:(0,i.jsx)(u.Z,{}),onClick:()=>{U(b)},children:"T\xecm kiếm"})}),(0,i.jsx)(x.ZP,{item:!0,xs:6,md:1.5,py:0,children:(0,i.jsx)(v.Z,{variant:"outlined",size:"small",fullWidth:!0,startIcon:(0,i.jsx)(d.Z,{}),onClick:()=>{var e;let n={tenct:"",loai_ct:(0,h.Z)(null===(e=f.query)||void 0===e?void 0:e.type),huyen:0,xa:0,song:0,luuvuc:0,tieu_luuvuc:0,tang_chuanuoc:0,nguonnuoc_kt:""};L(n),U({...n})},children:"Tải lại"})})]})})},f=t(5152);let y=t.n(f)()(()=>Promise.all([t.e(4028),t.e(6002),t.e(9269),t.e(3701),t.e(776),t.e(2573),t.e(3355),t.e(3385),t.e(6889)]).then(t.bind(t,3385)),{loadableGenerated:{webpack:()=>[3385]},ssr:!1});var D=e=>{var n,u;let{type:d,columns:m,renderActions:x}=e,g=c.R[d]||{columnVisibilityMap:{}},j=(0,r.useRouter)(),{page:T}=j.query,Z=(0,a.useRef)(!0),[p,C]=(0,a.useState)([]),[v,N]=(0,a.useState)(0),[f,D]=(0,a.useState)(!1),[b,L]=(0,a.useState)({tenct:"",loai_ct:(0,h.Z)(null===(n=j.query)||void 0===n?void 0:n.type),tochuc_canhan:0,pageNumber:1,pageSize:10}),[S,q]=(0,a.useState)();(0,a.useEffect)(()=>{switch(b.loai_ct){case 1:case 4:q([]);break;case 5:q(["hHaLuuTT","dungTichToanBo","luuLuongVeHo"]);break;default:q(["hHaLuuTT","mucNuocThuongLuu","luuLuongXaTran","dungTichToanBo","luuLuongXaDCTT","luuLuongVeHo"])}},[b]),(0,a.useEffect)(()=>((async()=>{if("giam-sat"===T)try{let e=await Promise.resolve().then(t.bind(t,64577)).then(e=>e.giamSatService.getMonitoringData({...b}));C(e.items),N(e.totalItems||0)}catch(e){console.error("Error fetching data:",e)}})(),()=>{Z.current=!1}),[T,b,f]),(0,a.useEffect)(()=>{let e=g.columnVisibilityMap,n=Number(b.loai_ct);q((null==e?void 0:e[n])||(null==e?void 0:e.default)||[])},[b.loai_ct,g.columnVisibilityMap]);let A=()=>D(e=>!e);return(0,i.jsxs)(s.Z,{container:!0,spacing:2,children:[(0,i.jsx)(s.Z,{xs:12,md:12,sx:{height:"55vh",overflow:"hidden"},children:(0,i.jsx)(y,{mapData:p,type:String((0,h.Z)(d)),center:[15.01,108.69],zoom:9.5})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(l.Z,{elevation:3,sx:{p:0},children:[(0,i.jsx)(U,{onChange:(e,n)=>{L(n=>({...n,...e})),j.push({pathname:j.pathname,query:{...j.query,...e}},void 0,{shallow:!0}),n&&A()}}),(0,i.jsx)(o.Z,{columns:m,rows:p,columnVisibility:S,id:"giam-sat_".concat(d),pagination:!0,page:(null!==(u=b.pageNumber)&&void 0!==u?u:1)-1,rowsPerPage:b.pageSize,totalItems:v,onPageChange:e=>L(n=>({...n,pageNumber:e+1})),onRowsPerPageChange:e=>L(n=>({...n,pageSize:e,pageNumber:1})),actions:e=>x&&x(e,{handlePostSuccess:A})})]})})]})}},23445:function(e,n,t){t.d(n,{Z:function(){return F}});var i=t(85893),a=t(67294),l=t(39141),s=t(68573),r=t(60990),c=t(28907),o=t(21038),h=t(52857),u=t(38138),d=t(45670),m=t(66568),x=t(63144),g=t(96788),j=t(51015),T=t(88196),Z=t(92365),p=t(40110),C=t(40492),v=t(96727),N=t(25026),U=t(93454),f=t(76592),y=t(70360),D=t(46577),b=t(8863),L=t(19827),S=t(94395),q=t(46482),A=t(10863),M=t(64577),H=t(11163),B=e=>{let{dataStorage:n,dataCons:t}=e;console.log(n);let[l,r]=(0,a.useState)(new Date);(0,a.useEffect)(()=>{let e=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(e)},[]);let c=e=>null==e||void 0==e?(0,i.jsx)("span",{children:"-"}):e,[o,h]=(0,a.useState)(!1),[u,d]=(0,a.useState)({constructionCode:t.maCT,time:"",data:{LUONGMUA:"",HALUU:"",DUNGTICH:"",QDEN:"",THUONGLUU:"",QUATRAN:"",NHAMAY:"",DCTT:"",LUULUONGHADU:"",DUKIENLUULUONGHADU:"",MUCNUOCHODUKIEN12GIO:""}}),[m,x]=(0,a.useState)({constructionCode:t.maCT,time:"",data:{KHAITHAC:"",MUCNUOCKHAITHAC:"",MUCNUOCQUANTRAC:""}}),B=()=>h(!1),I=e=>{let{name:n,value:t}=e.target;"time"===n?d({...u,time:t}):d({...u,data:{...u.data,[n]:t}})},k=async e=>{e.preventDefault();let n=Object.entries(u.data).map(e=>{let[n,t]=e;return{constructionCode:u.constructionCode,stationCode:n,value:""===t?null:Number(t),time:u.time,deviceStatus:0,status:!0}});await M.giamSatService.saveStoragePreData(n),B()},G=e=>{let{name:n,value:t}=e.target;"time"===n?x({...m,time:t}):x({...m,data:{...m.data,[n]:t}})},z=async e=>{e.preventDefault();let n=Object.entries(m.data).map(e=>{let[n,t]=e;return{constructionCode:m.constructionCode,stationCode:n,value:""===t?null:Number(t),time:m.time,deviceStatus:0,status:!0}});await M.giamSatService.saveStoragePreData(n),B()},{basePath:O}=(0,H.useRouter)();return(0,i.jsxs)(s.ZP,{children:[(0,i.jsxs)(s.ZP,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(g.Z,{sx:{fontWeight:600,fontSize:"0.875rem",display:"flex",alignItems:"center"},children:[(0,i.jsx)("img",{src:"".concat(O,"/images/icon/live.gif"),width:25,height:20,alt:"live"}),"\xa0Thời gian hiện tại: ",l.toLocaleString("zh-HK",{hour12:!1})]}),(0,i.jsxs)(j.Z,{variant:"contained",sx:{mt:2,mb:2,background:"#529263"},onClick:()=>h(!0),children:["Nhập số liệu \xa0 ",(0,i.jsx)(A.Z,{})]}),(0,i.jsxs)(T.Z,{open:o,onClose:B,children:[(0,i.jsx)(Z.Z,{children:"Nhập số liệu"}),1===t.loaiCT.idCha?(0,i.jsxs)("form",{onSubmit:k,children:[(0,i.jsx)(p.Z,{children:(0,i.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(s.ZP,{item:!0,xs:12,children:(0,i.jsx)(C.Z,{label:"Thời gian",type:"datetime-local",name:"time",value:u.time||"",onChange:e=>I(e),InputLabelProps:{shrink:!0},fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lượng mưa (mm)",type:"number",name:"LUONGMUA",value:u.data.LUONGMUA,onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Mực nước hạ lưu (mm)",type:"number",name:"HALUU",value:u.data.HALUU||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Dung t\xedch hồ (triệu m\xb3)",type:"number",name:"DUNGTICH",value:u.data.DUNGTICH||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lưu lượng đến hồ (m\xb3/s)",type:"number",name:"QDEN",value:u.data.QDEN||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Mực nước thượng lưu hồ (m)",type:"number",name:"THUONGLUU",value:u.data.THUONGLUU||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lưu lượng xả qua tr\xe0n (m\xb3/s)",type:"number",name:"QUATRAN",value:u.data.QUATRAN||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lưu lượng xả qua nh\xe0 m\xe1y (m\xb3/s)",type:"number",name:"NHAMAY",value:u.data.NHAMAY||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lưu lượng xả DCTT (m\xb3/s)",type:"number",name:"DCTT",value:u.data.DCTT||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Lưu lượng về hạ du (m\xb3/s)",type:"number",name:"LUULUONGHADU",value:u.data.LUULUONGHADU||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Dự kiến Q về hạ du 12h tới (m\xb3/s)",type:"number",name:"DUKIENLUULUONGHADU",value:u.data.DUKIENLUULUONGHADU||"",onChange:e=>I(e),fullWidth:!0,required:!0})}),(0,i.jsx)(s.ZP,{item:!0,xs:6,children:(0,i.jsx)(C.Z,{label:"Mực nước hồ dự kiến 12h tới (m)",type:"number",name:"MUCNUOCHODUKIEN12GIO",value:u.data.MUCNUOCHODUKIEN12GIO||"",onChange:e=>I(e),fullWidth:!0,required:!0})})]})}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(j.Z,{onClick:B,children:"Hủy"}),(0,i.jsx)(j.Z,{type:"submit",variant:"contained",children:"Lưu"})]})]}):2===t.loaiCT.idCha?(0,i.jsxs)("form",{onSubmit:z,children:[(0,i.jsxs)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:2,minWidth:350},children:[(0,i.jsx)(C.Z,{label:"Thời gian",type:"datetime-local",name:"time",value:m.time,onChange:G,InputLabelProps:{shrink:!0},required:!0}),(0,i.jsx)(C.Z,{label:"Lưu lượng khai th\xe1c",type:"number",name:"KHAITHAC",value:m.data.KHAITHAC,onChange:G,required:!0}),(0,i.jsx)(C.Z,{label:"Mực nước trong giếng khai th\xe1c",type:"number",name:"MUCNUOCKHAITHAC",value:m.data.MUCNUOCKHAITHAC,onChange:G,required:!0}),(0,i.jsx)(C.Z,{label:"Mực nước trong giếng quan trắc",type:"number",name:"MUCNUOCQUANTRAC",value:m.data.MUCNUOCQUANTRAC,onChange:G,required:!0})]}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(j.Z,{onClick:B,children:"Hủy"}),(0,i.jsx)(j.Z,{type:"submit",variant:"contained",children:"Lưu"})]})]}):(0,i.jsx)(i.Fragment,{})]})]}),(0,i.jsx)(N.Z,{component:U.Z,sx:{mt:5},children:(0,i.jsx)(f.Z,{sx:{minWidth:650},"aria-label":"simple table",children:1===t.loaiCT.idCha?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.Z,{className:"tableHead",children:[(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{size:"small",align:"center",rowSpan:2,children:"STT"}),(0,i.jsx)(b.Z,{size:"small",align:"center",rowSpan:2,children:"Thời gian"}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Lượng mưa ",(0,i.jsx)("br",{}),"(mm)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Mực nước ",(0,i.jsx)("br",{})," hạ lưu (m)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Dung t\xedch hồ ",(0,i.jsx)("br",{})," (triệu m",(0,i.jsx)("sup",{children:"3"}),")"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Q đến hồ",(0,i.jsx)("br",{})," (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsx)(b.Z,{size:"small",align:"center",colSpan:3,children:"Mực nước thượng lưu hồ (m)"}),(0,i.jsxs)(b.Z,{size:"small",align:"center",colSpan:3,children:["Q xả qua tr\xe0n (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",colSpan:3,children:["Q xả qua nh\xe0 m\xe1y (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",colSpan:3,children:["Q xả DCTT (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",colSpan:3,children:["Q về hạ du (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Dự kiến Q về hạ du ",(0,i.jsx)("br",{})," trong 12h tới(m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsxs)(b.Z,{size:"small",align:"center",rowSpan:2,children:["Mực nước hồ ",(0,i.jsx)("br",{}),"dự kiến 12h tới (m)"]})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"})]})]}),(0,i.jsx)(L.Z,{children:n.map((e,n)=>(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{align:"center",children:n+1}),(0,i.jsx)(b.Z,{align:"center",children:(0,S.o0)(null==e?void 0:e.time)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.LUONGMUA)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.HALUU)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.DUNGTICH)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.QDEN)}),(0,i.jsx)(b.Z,{align:"center",children:c(t.thongso.hThuongLuuTT)}),(0,i.jsx)(b.Z,{align:"center",children:e.data.THUONGLUU}),(0,i.jsx)(b.Z,{align:"center",children:(0,q.c)(t.thongso.hThuongLuuTT,e.data.THUONGLUU)}),(0,i.jsx)(b.Z,{align:"center",children:c(t.thongso.qXaTran)}),(0,i.jsx)(b.Z,{align:"center",children:e.data.QUATRAN}),(0,i.jsx)(b.Z,{align:"center",children:(0,q.c)(t.thongso.qXaTran,e.data.QUATRAN)}),(0,i.jsx)(b.Z,{align:"center",children:c(t.thongso.qktLonNhat)}),(0,i.jsx)(b.Z,{align:"center",children:e.data.NHAMAY}),(0,i.jsx)(b.Z,{align:"center",children:(0,q.c)(t.thongso.qktLonNhat,e.data.NHAMAY)}),(0,i.jsx)(b.Z,{align:"center",children:c(t.thongso.qtt)}),(0,i.jsx)(b.Z,{align:"center",children:e.data.DCTT}),(0,i.jsx)(b.Z,{align:"center",children:(0,q.c)(t.thongso.qtt,e.data.DCTT)}),(0,i.jsx)(b.Z,{align:"center",children:c(t.thongso.htoiThieu)}),(0,i.jsx)(b.Z,{align:"center",children:null==e?void 0:e.data.LUULUONGHADU}),(0,i.jsx)(b.Z,{align:"center",children:(0,q.c)(t.thongso.htoiThieu,e.data.LUULUONGHADU)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.DUKIENLUULUONGHADU)}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.MUCNUOCHODUKIEN12GIO)})]},n))})]}):2===t.loaiCT.idCha?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.Z,{className:"tableHead",children:[(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{size:"small",align:"center",rowSpan:2,children:"STT"}),(0,i.jsx)(b.Z,{size:"small",align:"center",rowSpan:2,children:"Thời gian"}),(0,i.jsxs)(b.Z,{size:"small",align:"center",colSpan:3,children:["Lưu lượng khai th\xe1c (m",(0,i.jsx)("sup",{children:"3"}),"/s)"]}),(0,i.jsx)(b.Z,{size:"small",align:"center",colSpan:3,children:"Mực nước trong giếng khai th\xe1c (m)"}),(0,i.jsx)(b.Z,{size:"small",align:"center",colSpan:3,children:"Mực nước trong giếng quan trắc (m)"})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Y\xeau cầu"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Thực tế"}),(0,i.jsx)(b.Z,{size:"small",align:"center",children:"Ch\xeanh lệch"})]})]}),(0,i.jsx)(L.Z,{children:n.map((e,n)=>(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(b.Z,{align:"center",children:n+1}),(0,i.jsx)(b.Z,{align:"center",children:(0,S.o0)(null==e?void 0:e.time)}),(0,i.jsx)(b.Z,{align:"center",children:"-"}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.KHAITHAC)}),(0,i.jsx)(b.Z,{align:"center",children:"-"}),(0,i.jsx)(b.Z,{align:"center",children:"-"}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.MUCNUOCKHAITHAC)}),(0,i.jsx)(b.Z,{align:"center",children:"-"}),(0,i.jsx)(b.Z,{align:"center",children:"-"}),(0,i.jsx)(b.Z,{align:"center",children:c(null==e?void 0:e.data.MUCNUOCQUANTRAC)}),(0,i.jsx)(b.Z,{align:"center",children:"-"})]},n))})]}):(0,i.jsx)(i.Fragment,{})})})]})},I=t(64715),k=t(10723),G=t(67017),z=t(25615),O=t(88793),w=t(24570),P=t(78042),K=t(31712),_=e=>{let{dataStorage:n,dataCons:t}=e,a=n.map(e=>({...e,time:(0,S.o0)(e.time)}));return(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{textAlign:"center"},children:null==t?void 0:t.tenCT}),(0,i.jsx)(I.h,{width:"100%",height:400,children:(0,i.jsxs)(k.w,{data:a,margin:{top:20,right:30,left:20,bottom:5},children:[(0,i.jsx)(G.q,{strokeDasharray:"3 3"}),(0,i.jsx)(z.K,{dataKey:"time"}),(0,i.jsx)(O.B,{yAxisId:"left",label:{value:"Mực Nước",angle:-90,position:"insideLeft"}}),(0,i.jsx)(O.B,{yAxisId:"right",orientation:"right",label:{value:"Lưu Lượng",angle:-90,position:"insideRight"}}),(0,i.jsx)(w.u,{}),(0,i.jsx)(P.D,{}),(0,i.jsx)(K.x,{yAxisId:"left",type:"monotone",dataKey:"data.THUONGLUU",stroke:"#1f77b4",name:"Mực nước hồ (m)"}),(0,i.jsx)(K.x,{yAxisId:"right",type:"monotone",dataKey:"data.DCTT",stroke:"#2ca02c",name:"Lưu lượng xả duy tr\xec DCTT (m\xb3/s)"}),(0,i.jsx)(K.x,{yAxisId:"right",type:"monotone",dataKey:"data.NHAMAY",stroke:"#ff7f0e",name:"Lưu lượng xả qua nh\xe0 m\xe1y (m\xb3/s)"}),(0,i.jsx)(K.x,{yAxisId:"right",type:"monotone",dataKey:"data.QUATRAN",stroke:"#d62728",name:"Lưu lượng xả qua tr\xe0n (m\xb3/s)"}),(0,i.jsx)(K.x,{yAxisId:"right",type:"monotone",dataKey:"data.LUULUONGVEHALUU",stroke:"#9467bd",name:"Lưu lượng về hạ du (m\xb3/s)"})]})})]})},E=t(27484),Y=t.n(E),Q=t(50720),W=t(10586),R=e=>{let{startDate:n,endDate:t,setStartDate:a,setEndDate:l,onFilter:s}=e;return(0,i.jsx)(Q._,{dateAdapter:W.y,children:(0,i.jsxs)(r.Z,{display:"flex",alignItems:"center",mb:2,children:[(0,i.jsx)(C.Z,{label:"Start Date",type:"date",value:n?n.format("YYYY-MM-DD"):"",onChange:e=>a(Y()(e.target.value)),InputLabelProps:{shrink:!0},sx:{mr:2}}),(0,i.jsx)(C.Z,{label:"End Date",type:"date",value:t?t.format("YYYY-MM-DD"):"",onChange:e=>l(Y()(e.target.value)),InputLabelProps:{shrink:!0},sx:{mr:2}}),(0,i.jsx)(j.Z,{variant:"contained",color:"primary",onClick:s,children:"Lọc"})]})})};let V=e=>{let{dataCons:n}=e,[t,l]=(0,a.useState)("1"),{data:o}=n,[h,u]=(0,a.useState)([]),[g,j]=(0,a.useState)(Y()().subtract(24,"hour")),[T,Z]=(0,a.useState)(Y()()),p=(0,a.useRef)(!0);(0,a.useEffect)(()=>(p.current=!0,()=>{p.current=!1}),[]);let C=async()=>{if(!g||!T)return;let e="YYYY-MM-DD HH:mm:ss.SSSSSS",n=encodeURIComponent(g.format(e)),t=encodeURIComponent(T.format(e));try{let e=await (0,M.getData)("GiamSatSoLieu/thong-tin?ConstructionCode=".concat(o.maCT,"&StartDate=").concat(n,"&EndDate=").concat(t),{});p.current&&u(e)}catch(e){console.error("Lỗi khi gọi API:",e)}};return(0,a.useEffect)(()=>{C()},[g,T,null==o?void 0:o.maCT]),(0,i.jsx)(s.ZP,{children:(0,i.jsxs)(d.ZP,{value:t,children:[(0,i.jsx)(r.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(m.Z,{onChange:(e,n)=>{l(n)},"aria-label":"ground water reserve",children:[(0,i.jsx)(c.Z,{label:"Số liệu vận h\xe0nh",value:"1"}),(0,i.jsx)(c.Z,{label:"Đồ thị vận h\xe0nh",value:"2"})]})}),(0,i.jsxs)(x.Z,{value:"1",children:[(0,i.jsx)(R,{startDate:g,endDate:T,setStartDate:j,setEndDate:Z,onFilter:C}),(0,i.jsx)(B,{dataStorage:h,dataCons:o})]}),(0,i.jsxs)(x.Z,{value:"2",children:[(0,i.jsx)(R,{startDate:g,endDate:T,setStartDate:j,setEndDate:Z,onFilter:C}),(0,i.jsx)(_,{dataStorage:h,dataCons:o})]})]})})};var F=e=>{let{data:n}=e,t="Th\xf4ng tin số liệu gi\xe1m s\xe1t vận h\xe0nh - "+(null==n?void 0:n.tenCT);return(0,i.jsx)(u.Z,{children:e=>(0,i.jsx)(r.Z,{children:(0,i.jsx)(o.Z,{title:"Xem chi tiết",children:(0,i.jsx)(h.Z,{onClick:()=>e((0,i.jsx)(V,{dataCons:{data:n}}),t),children:(0,i.jsx)(l.Z,{className:"tableActionBtn"})})})})})}}}]);