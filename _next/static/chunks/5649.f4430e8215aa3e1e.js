(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5649],{63323:function(){L.KML=L.FeatureGroup.extend({initialize:function(e){this._kml=e,this._layers={},e&&this.addKML(e)},addKML:function(e){var t=L.KML.parseKML(e);if(t&&t.length){for(var n=0;n<t.length;n++)this.fire("addlayer",{layer:t[n]}),this.addLayer(t[n]);this.latLngs=L.KML.getLatLngs(e),this.fire("loaded")}},latLngs:[]}),L.Util.extend(L.KML,{parseKML:function(e){var t=this.parseStyles(e);this.parseStyleMap(e,t);for(var n,r=e.getElementsByTagName("Folder"),o=[],i=0;i<r.length;i++)this._check_folder(r[i])&&(n=this.parseFolder(r[i],t))&&o.push(n);r=e.getElementsByTagName("Placemark");for(var a=0;a<r.length;a++)this._check_folder(r[a])&&(n=this.parsePlacemark(r[a],e,t))&&o.push(n);r=e.getElementsByTagName("GroundOverlay");for(var s=0;s<r.length;s++)(n=this.parseGroundOverlay(r[s]))&&o.push(n);return o},_check_folder:function(e,t){for(e=e.parentNode;e&&"Folder"!==e.tagName;)e=e.parentNode;return!e||e===t},parseStyles:function(e){for(var t={},n=e.getElementsByTagName("Style"),r=0,o=n.length;r<o;r++){var i=this.parseStyle(n[r]);i&&(t["#"+i.id]=i)}return t},parseStyle:function(e){var t,n,r={},o={},i={},a={color:!0,width:!0,Icon:!0,href:!0,hotSpot:!0};function s(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n],o=r.tagName;if(a[o]){if("hotSpot"===o)for(var l=0;l<r.attributes.length;l++)t[r.attributes[l].name]=r.attributes[l].nodeValue;else{var u=r.childNodes[0].nodeValue;"color"===o?(t.opacity=parseInt(u.substring(0,2),16)/255,t.color="#"+u.substring(6,8)+u.substring(4,6)+u.substring(2,4)):"width"===o?t.weight=u:"Icon"===o?(i=s(r)).href&&(t.href=i.href):"href"===o&&(t.href=u)}}}return t}return(t=e.getElementsByTagName("LineStyle"))&&t[0]&&(r=s(t[0])),(t=e.getElementsByTagName("PolyStyle"))&&t[0]&&(o=s(t[0])),o.color&&(r.fillColor=o.color),o.opacity&&(r.fillOpacity=o.opacity),(t=e.getElementsByTagName("IconStyle"))&&t[0]&&(i=s(t[0])),i.href&&(r.icon=new L.KMLIcon({iconUrl:i.href,shadowUrl:null,anchorRef:{x:i.x,y:i.y},anchorType:{x:i.xunits,y:i.yunits}})),(n=e.getAttribute("id"))&&r&&(r.id=n),r},parseStyleMap:function(e,t){for(var n=e.getElementsByTagName("StyleMap"),r=0;r<n.length;r++){var o,i,a,s=n[r];(a=s.getElementsByTagName("key"))&&a[0]&&(o=a[0].textContent),(a=s.getElementsByTagName("styleUrl"))&&a[0]&&(i=a[0].textContent),"normal"===o&&(t["#"+s.getAttribute("id")]=t[i])}},parseFolder:function(e,t){var n,r,o=[];n=e.getElementsByTagName("Folder");for(var i=0;i<n.length;i++)this._check_folder(n[i],e)&&(r=this.parseFolder(n[i],t))&&o.push(r);n=e.getElementsByTagName("Placemark");for(var a=0;a<n.length;a++)this._check_folder(n[a],e)&&(r=this.parsePlacemark(n[a],e,t))&&o.push(r);n=e.getElementsByTagName("GroundOverlay");for(var s=0;s<n.length;s++)this._check_folder(n[s],e)&&(r=this.parseGroundOverlay(n[s]))&&o.push(r);return o.length?1===o.length?o[0]:new L.FeatureGroup(o):void 0},parsePlacemark:function(e,t,n,r){var o,i,a,s,l,u=r||{};for(i=0,l=e.getElementsByTagName("styleUrl");i<l.length;i++){var c=l[i].childNodes[0].nodeValue;for(var d in n[c])u[d]=n[c][d]}if(e.getElementsByTagName("Style")[0]){var h=this.parseStyle(e);if(h)for(s in h)u[s]=h[s]}var f=["MultiGeometry","MultiTrack","gx:MultiTrack"];for(o in f)for(i=0,l=e.getElementsByTagName(f[o]);i<l.length;i++)return this.parsePlacemark(l[i],t,n,u);var p=[],g=["LineString","Polygon","Point","Track","gx:Track"];for(a in g){var m=g[a];for(i=0,l=e.getElementsByTagName(m);i<l.length;i++){var y=this["parse"+m.replace(/gx:/,"")](l[i],t,u);y&&p.push(y)}}if(p.length){var v=p[0];p.length>1&&(v=new L.FeatureGroup(p));var _,x="";for((l=e.getElementsByTagName("name")).length&&l[0].childNodes.length&&(_=l[0].childNodes[0].nodeValue),l=e.getElementsByTagName("description"),i=0;i<l.length;i++)for(a=0;a<l[i].childNodes.length;a++)x+=l[i].childNodes[a].nodeValue;return _&&v.on("add",function(){v.bindPopup("<h2>"+_+"</h2>"+x,{className:"kml-popup"})}),v}},parseCoords:function(e){var t=e.getElementsByTagName("coordinates");return this._read_coords(t[0])},parseLineString:function(e,t,n){var r=this.parseCoords(e);if(r.length)return new L.Polyline(r,n)},parseTrack:function(e,t,n){var r=t.getElementsByTagName("gx:coord");0===r.length&&(r=t.getElementsByTagName("coord"));for(var o=[],i=0;i<r.length;i++)o=o.concat(this._read_gxcoords(r[i]));if(o.length)return new L.Polyline(o,n)},parsePoint:function(e,t,n){var r=e.getElementsByTagName("coordinates");if(r.length){var o=r[0].childNodes[0].nodeValue.split(",");return new L.KMLMarker(new L.LatLng(o[1],o[0]),n)}},parsePolygon:function(e,t,n){var r,o,i,a=[],s=[];for(o=0,r=e.getElementsByTagName("outerBoundaryIs");o<r.length;o++)(i=this.parseCoords(r[o]))&&a.push(i);for(o=0,r=e.getElementsByTagName("innerBoundaryIs");o<r.length;o++)(i=this.parseCoords(r[o]))&&s.push(i);return a.length?(n.fillColor&&(n.fill=!0),1===a.length)?new L.Polygon(a.concat(s),n):new L.MultiPolygon(a,n):void 0},getLatLngs:function(e){for(var t=e.getElementsByTagName("coordinates"),n=[],r=0;r<t.length;r++)n=n.concat(this._read_coords(t[r]));return n},_read_coords:function(e){var t,n="",r=[];for(t=0;t<e.childNodes.length;t++)n+=e.childNodes[t].nodeValue;for(t=0,n=n.split(/[\s\n]+/);t<n.length;t++){var o=n[t].split(",");o.length<2||r.push(new L.LatLng(o[1],o[0]))}return r},_read_gxcoords:function(e){var t="",n=[];return t=e.firstChild.nodeValue.split(" "),n.push(new L.LatLng(t[1],t[0])),n},parseGroundOverlay:function(e){var t=e.getElementsByTagName("LatLonBox")[0],n=new L.LatLngBounds([t.getElementsByTagName("south")[0].childNodes[0].nodeValue,t.getElementsByTagName("west")[0].childNodes[0].nodeValue],[t.getElementsByTagName("north")[0].childNodes[0].nodeValue,t.getElementsByTagName("east")[0].childNodes[0].nodeValue]),r={Icon:!0,href:!0,color:!0},o={};if(o=function e(t){for(var n={},o={},i=0;i<t.childNodes.length;i++){var a=t.childNodes[i],s=a.tagName;if(r[s]){var l=a.childNodes[0].nodeValue;"Icon"===s?(o=e(a)).href&&(n.href=o.href):"href"===s?n.href=l:"color"===s&&(n.opacity=parseInt(l.substring(0,2),16)/255,n.color="#"+l.substring(6,8)+l.substring(4,6)+l.substring(2,4))}}return n}(e),void 0!==t.getElementsByTagName("rotation")[0]){var i=t.getElementsByTagName("rotation")[0].childNodes[0].nodeValue;o.rotation=parseFloat(i)}return new L.RotatedImageOverlay(o.href,n,{opacity:o.opacity,angle:o.rotation})}}),L.KMLIcon=L.Icon.extend({options:{iconSize:[32,32],iconAnchor:[16,16]},_setIconStyles:function(e,t){L.Icon.prototype._setIconStyles.apply(this,[e,t]),e.complete?this.applyCustomStyles(e):e.onload=this.applyCustomStyles.bind(this,e)},applyCustomStyles:function(e){var t=this.options;this.options.popupAnchor=[0,-.83*e.height],"fraction"===t.anchorType.x&&(e.style.marginLeft=-t.anchorRef.x*e.width+"px"),"fraction"===t.anchorType.y&&(e.style.marginTop=-(1-t.anchorRef.y)*e.height+1+"px"),"pixels"===t.anchorType.x&&(e.style.marginLeft=-t.anchorRef.x+"px"),"pixels"===t.anchorType.y&&(e.style.marginTop=t.anchorRef.y-e.height+1+"px")}}),L.KMLMarker=L.Marker.extend({options:{icon:new L.KMLIcon.Default}}),L.RotatedImageOverlay=L.ImageOverlay.extend({options:{angle:0},_reset:function(){L.ImageOverlay.prototype._reset.call(this),this._rotate()},_animateZoom:function(e){L.ImageOverlay.prototype._animateZoom.call(this,e),this._rotate()},_rotate:function(){if(L.DomUtil.TRANSFORM)this._image.style[L.DomUtil.TRANSFORM]+=" rotate("+this.options.angle+"deg)";else if(L.Browser.ie){var e=this.options.angle*(Math.PI/180),t=Math.cos(e),n=Math.sin(e);this._image.style.filter+=" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+t+", M12="+-n+", M21="+n+", M22="+t+")"}},getBounds:function(){return this._bounds}})},87210:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(74579);n(58954);var o=(0,r.dW)(e=>({instance:L.bingLayer(e.bingkey,e)}))},58954:function(){L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:"",style:""},initialize:function(e,t){L.Util.setOptions(this,t),this._bing_key=e,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(e,t,n){for(var r="",o=n;o>0;o--){var i=0,a=1<<o-1;(e&a)!=0&&(i+=1),(t&a)!=0&&(i+=2),r+=i}return r},getTileUrl:function(e){var t=this._getZoomForUrl(),n=this.options.subdomains,r=this.options.subdomains[Math.abs((e.x+e.y)%n.length)];return this._url.replace("{subdomain}",r).replace("{quadkey}",this.tile2quad(e.x,e.y,t)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(this.metaRequested)return;this.metaRequested=!0;let e=this;var t="_bing_metadata_"+L.Util.stamp(this);window[t]=function(n){window[t]=void 0;var r=document.getElementById(t);if(r.parentNode.removeChild(r),n.errorDetails){console.log(n.errorDetails);return}e.initMetadata(n)};var n="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),r=n+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._bing_key+"&UriScheme="+n+"&culture="+this.options.culture+"&style="+this.options.style,o=document.createElement("script");o.type="text/javascript",o.src=r,o.id=t,document.getElementsByTagName("head")[0].appendChild(o)},initMetadata:function(e){var t=e.resourceSets[0].resources[0];if(this.options.subdomains=t.imageUrlSubdomains,this._url=t.imageUrl,t.imageryProviders)for(var n=0;n<t.imageryProviders.length;n++)for(var r=t.imageryProviders[n],o=0;o<r.coverageAreas.length;o++){var i=r.coverageAreas[o],a={zoomMin:i.zoomMin,zoomMax:i.zoomMax,active:!1};if(void 0!=i.bbox)var s=new L.LatLngBounds(new L.LatLng(i.bbox[0]+.01,i.bbox[1]+.01),new L.LatLng(i.bbox[2]-.01,i.bbox[3]-.01));a.bounds=s,a.attrib=r.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var e=this._map.getZoom(),t=0;t<this._providers.length;t++){var n=this._providers[t];e<=n.zoomMax&&e>=n.zoomMin?(!n.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(n.attrib),n.active=!0):(n.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}},onAdd:function(e){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[e])},onRemove:function(e){for(var t=0;t<this._providers.length;t++){var n=this._providers[t];n.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[e])}}),L.bingLayer=function(e,t){return new L.BingLayer(e,t)}},42539:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(57679);let o=(e,t)=>{var n,o;if(t>=-180&&t<=180&&e>=-90&&e<=90)return[e,t];r.Z.defs("VN2000_QUANG_NGAI","+proj=tmerc +lat_0=0 +lon_0=108.000 +k=0.9999 +x_0=500000 +y_0=0 +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +units=m +no_defs");let i=r.Z.defs("VN2000_QUANG_NGAI"),a=r.Z.defs("EPSG:4326"),s=i&&(null===(n=i.units)||void 0===n?void 0:n.to_meter)||1,l=a&&(null===(o=a.units)||void 0===o?void 0:o.to_meter)||1,u=r.Z.toPoint([e/s,t/s]),c=(0,r.Z)(i,a).forward(u);return c.x*=l.toFixed(8),c.y*=l.toFixed(8),[c.y,c.x]}},95649:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(85893),o=n(67294),i=n(32342),a=n(39153),s=n(5715),l=n(26467),u=n(20577),c=n(64049),d=n(32604),h=n(87210),f=n(59152),p=n.n(f),g=n(60990),m=n(96788),y=n(42539),v=n(35376);n(53183),n(23008);let{BaseLayer:_}=i.LayersControl,x=e=>{let{coords:t,zoom:n}=e;return(0,a.Sx)().flyTo(t,n,{duration:1}),null},b=e=>new L.Icon({iconUrl:e,iconSize:[18,18],iconAnchor:[18,18],popupAnchor:[-9,-18]}),N=e=>1==e?b("/images/icon/rain-0.svg"):b("/images/icon/thuydien.png");function T(e){let{center:t,zoom:n,showLabel:a,mapData:f,loading:b,type:T=null}=e,[C,M]=(0,o.useState)("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L"),[E,B]=(0,o.useState)(null);return(0,o.useEffect)(()=>{M("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L"),fetch("/kml/tinh-quangngai.kml").then(e=>e.text()).then(e=>{B(new DOMParser().parseFromString(e,"text/xml"))})},[]),b?(0,r.jsx)(g.Z,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(v.Z,{})}):(0,r.jsx)(g.Z,{sx:{height:"100%"},children:(0,r.jsxs)(s.h,{attributionControl:!1,center:t,zoom:n,style:{height:"100%"},children:[(0,r.jsxs)(i.LayersControl,{position:"bottomright",children:[(0,r.jsx)(_,{checked:"hanh-chinh"==T,name:"Bản đồ h\xe0nh ch\xednh",children:(0,r.jsx)(l.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,r.jsx)(_,{checked:"road"==T,name:"Bản đồ đường",children:(0,r.jsx)(h.S,{bingkey:C,type:"Road"})}),(0,r.jsx)(_,{name:"Bản đồ vệ tinh 1",children:(0,r.jsx)(l.I,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,r.jsx)(_,{checked:!T,name:"Bản đồ vệ tinh 2",children:(0,r.jsx)(h.S,{bingkey:C,type:"AerialWithLabels"})})]}),f&&(null==f?void 0:f.map(e=>null!==e.x||null!==e.y?(0,r.jsxs)(u.J,{icon:N(e.idLoaiTram),position:[(0,y.D)(null==e?void 0:e.y,null==e?void 0:e.x)[0],(0,y.D)(e.y,e.x)[1]],children:[!0===a&&(0,r.jsx)(c.u,{direction:"top",offset:[-10,-18],opacity:1,permanent:!0,children:e.tenCT}),(0,r.jsxs)(d.G,{children:[(0,r.jsx)(m.Z,{sx:{color:"#035291",textAlign:"center",fontWeight:"bold",margin:"0 !important"},children:e.tenCT}),(0,r.jsx)(m.Z,{sx:{textAlign:"center",fontSize:12,margin:"0 !important",fontStyle:"italic"},children:e.viTriCT}),(0,r.jsxs)(m.Z,{sx:{textAlign:"center",fontSize:12,margin:"0 !important"},children:["Kinh độ (X):",e.x," \xa0 Vĩ độ (Y):",e.y]})]})]},e.id):null)),(0,r.jsx)(x,{coords:t,zoom:n}),E&&(0,r.jsx)(p(),{kml:E})]})})}},23008:function(){},59152:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),n(63323);var a=i(n(45243)),s=n(80234),l=function(e){e.options.preferCanvas&&e._renderer._update()};t.default=(0,s.createLayerComponent)(function(e,t){var n=e.kml,r=e.kmlOptions,o=new a.KML(n,r);return t.map.options.preferCanvas&&setTimeout(function(e){var t;null===(t=e._renderer)||void 0===t||t._update()},0,t.map),{instance:o,context:t}},function(e,t,n){l(e._map)})},80234:function(e,t,n){"use strict";n.r(t),n.d(t,{CONTEXT_VERSION:function(){return a.cV},LeafletContext:function(){return a.U1},LeafletProvider:function(){return a.UO},addClassName:function(){return d},createContainerComponent:function(){return i.RA},createControlComponent:function(){return m.vm},createControlHook:function(){return s.y},createDivOverlayComponent:function(){return i.LE},createDivOverlayHook:function(){return l.W},createElementHook:function(){return p.I},createElementObject:function(){return p.O},createLayerComponent:function(){return m.dW},createLayerHook:function(){return v.u},createLeafComponent:function(){return i.G5},createLeafletContext:function(){return a.Hb},createOverlayComponent:function(){return m.SO},createPathComponent:function(){return m.Au},createPathHook:function(){return b.n},createTileLayerComponent:function(){return m.Lf},extendContext:function(){return a.sj},removeClassName:function(){return h},updateCircle:function(){return o},updateClassName:function(){return f},updateGridLayer:function(){return y.I},updateMediaOverlay:function(){return _},useAttribution:function(){return r.d},useEventHandlers:function(){return g.t},useLayerLifecycle:function(){return v.g},useLeafletContext:function(){return a.mE},usePathOptions:function(){return b._},withPane:function(){return x.q}});var r=n(66389);function o(e,t,n){t.center!==n.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==n.radius&&e.setRadius(t.radius)}var i=n(99534),a=n(1410),s=n(77418),l=n(93461),u=n(45243);function c(e){return e.split(" ").filter(Boolean)}function d(e,t){c(t).forEach(t=>{u.DomUtil.addClass(e,t)})}function h(e,t){c(t).forEach(t=>{u.DomUtil.removeClass(e,t)})}function f(e,t,n){null!=e&&n!==t&&(null!=t&&t.length>0&&h(e,t),null!=n&&n.length>0&&d(e,n))}var p=n(27999),g=n(60620),m=n(74579),y=n(71469),v=n(83655);function _(e,t,n){t.bounds instanceof u.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}var x=n(81802),b=n(78840)},39153:function(e,t,n){"use strict";n.d(t,{Sx:function(){return i},zV:function(){return a}});var r=n(1410),o=n(67294);function i(){return(0,r.mE)().map}function a(e){let t=i();return(0,o.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}}}]);