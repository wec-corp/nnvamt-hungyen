"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1495],{50121:function(n,i){i.Z=n=>{if(null!=n){let i=new Date(n),e=10>i.getDate()?"0"+i.getDate():i.getDate(),l=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,t=i.getFullYear();return"".concat(e,"/").concat(l,"/").concat(t)}return""}},42539:function(n,i,e){e.d(i,{D:function(){return t}});var l=e(57679);let t=(n,i)=>{var e,t;if(i>=-180&&i<=180&&n>=-90&&n<=90)return[n,i];l.Z.defs("VN2000_QUANG_NGAI","+proj=tmerc +lat_0=0 +lon_0=108.000 +k=0.9999 +x_0=500000 +y_0=0 +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +units=m +no_defs");let o=l.Z.defs("VN2000_QUANG_NGAI"),s=l.Z.defs("EPSG:4326"),r=o&&(null===(e=o.units)||void 0===e?void 0:e.to_meter)||1,c=s&&(null===(t=s.units)||void 0===t?void 0:t.to_meter)||1,a=l.Z.toPoint([n/r,i/r]),d=(0,l.Z)(o,s).forward(a);return d.x*=c.toFixed(8),d.y*=c.toFixed(8),[d.y,d.x]}},5531:function(n,i,e){e.d(i,{B:function(){return l}});let l=(n,i)=>{switch(n){case 1:return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc"]};case 2:return{consType:[{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]}],initialItems:["nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd"]};case 3:return{consType:[{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]};default:if(i)switch(i){case"nuoc-mat":return{consType:[],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","conglaynuoc","nhamaynuoc"]};case"ktsd-nuoc-duoi-dat":return{consType:[],initialItems:["giengkhoan","giengdao"]};case"td-nuoc-duoi-dat":return{consType:[],initialItems:["thamdo"]};case"hnk-nuoc-duoi-dat":return{consType:[],initialItems:["hanhnghekhoan"]}}return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]},{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]},{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc","nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd","xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]}}}},87309:function(n,i,e){e.r(i);var l=e(85893),t=e(67294),o=e(60990),s=e(81873),r=e(96788),c=e(68573),a=e(93454),d=e(56894),h=e(65806),u=e(12166),x=e(81495),g=e(95587),p=e(5152),m=e.n(p),j=e(11163),f=e(77584),Z=e(39892),v=e(42539),b=e(94395),y=e(59701),_=e(84247),k=e(95906),C=e(64577);let T=m()(()=>Promise.all([e.e(4028),e.e(6002),e.e(9269),e.e(649),e.e(723),e.e(2573),e.e(3355),e.e(3385),e.e(6972)]).then(e.bind(e,3385)),{loadableGenerated:{webpack:()=>[3385]},ssr:!1});i.default=()=>{let[n,i]=(0,t.useState)(!1),[e,p]=(0,t.useState)([]),[m,S]=(0,t.useState)(!1),[P,N]=(0,t.useState)([]),[w,W]=(0,t.useState)(1),[z,q]=(0,t.useState)(10),[L,D]=(0,t.useState)(0),[G,I]=(0,t.useState)([14.968667,109.114229]),[B,K]=(0,t.useState)(9),H=(0,j.useRouter)(),{type:R}=H.query,A=(0,t.useRef)(null),{licFilter:E}=(0,k.Z)(),[Q,F]=(0,t.useState)(!1),M=()=>F(n=>!n),U=n=>{I(n),K(13),window.scrollTo({top:0,left:0,behavior:"smooth"})},X=async()=>{S(!0);try{let n={...E,pageNumber:w,pageSize:z,loai_ct:(0,f.Z)(R)||E.loai_ct},i=await C.giayphepService.getAll(n);N(i.items||[]),D(i.totalItems||0);let e=(i.items||[]).filter(n=>n.congtrinh).reduce((n,i)=>(n.some(n=>n.id===i.congtrinh.id)||n.push(i.congtrinh),n),[]);p(e)}catch(n){console.error(n)}finally{S(!1)}};(0,t.useEffect)(()=>{X()},[JSON.stringify(E),Q,w,z]);let V=n=>{C.giayphepService.approve(n).finally(()=>X())},O=n=>{C.giayphepService.cancelApprove(n).finally(()=>X())},{getPermissionMap:Y}=(0,y.Q)(),[$,J]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{J(await Y(H.asPath))})()},[H.asPath]);let nn=[{id:"stt",label:"STT",align:"center"},{id:"soGP",label:"Số GP",align:"left",pinned:"left",minWidth:200,elm:n=>(0,l.jsxs)(o.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",whiteSpace:"nowrap",children:[n.soGP,(0,l.jsxs)(o.Z,{display:"flex",alignItems:"center",ml:2,children:[(0,l.jsx)(s.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:(null==n?void 0:n.trangThaiCapPhep)?"Đ\xe3 duyệt":"Chờ duyệt...",size:"small",color:(null==n?void 0:n.trangThaiCapPhep)?"success":"error"}),(0,l.jsx)(x.bu,{row:n,setPostSuccess:M,triggerRef:A,onApprove:V,onCancelApprove:O,permission:$})]})]})},{id:"ngayKy",label:"Ng\xe0y k\xfd",align:"left",width:200,format:(n,i)=>(0,b.p6)(null==i?void 0:i.ngayKy)},{id:"hieuluc_gp",label:"Hiệu lực GP",align:"center",width:200,elm:n=>(0,x._X)({data:n,type:"component"})},{id:"ngayCoHieuLuc",label:"Ng\xe0y c\xf3 hiệu lực",align:"left",width:200,format:(n,i)=>(0,b.p6)(i.ngayCoHieuLuc)},{id:"thoiHan",label:"Thời hạn cấp ph\xe9p",align:"left",width:100,format:(n,i)=>i.thoiHan},{id:"tochuc_canhan",label:"Cơ quan/c\xe1 nh\xe2n được CP",align:"left",children:[{id:"tenTCCN",label:"T\xean",align:"left",width:300,maxWidth:300,format:(n,i)=>{var e;return null===(e=i.tochuc_canhan)||void 0===e?void 0:e.tenTCCN}},{id:"diaChi",label:"Địa chỉ",align:"left",width:300,maxWidth:300,format:(n,i)=>{var e;return null===(e=i.tochuc_canhan)||void 0===e?void 0:e.diaChi}}]},{id:"lichSuCapPhep",label:"Giấy ph\xe9p li\xean quan",align:"left",elm:n=>{var i;return null===(i=n.lichSuCapPhep)||void 0===i?void 0:i.map((i,e)=>n.id!=i.id?(0,l.jsx)(t.Fragment,{children:(0,l.jsx)(g.Z,{name:"".concat(null==i?void 0:i.soGP,"(").concat((0,b.p6)(null==i?void 0:i.ngayKy),") - ").concat((0,x._X)({data:i,type:"string"})," "),src:null==i?void 0:i.fileGiayPhep})},e):null)}},{id:"congtrinh",label:"C\xf4ng tr\xecnh",align:"left",children:[{id:"tenCT",label:"T\xean",align:"left",width:300,maxWidth:300,format:(n,i)=>{var e;return(0,l.jsx)(r.Z,{className:"btnShowFilePdf",onClick:()=>U((0,v.D)(null==i?void 0:i.congtrinh.y,null==i?void 0:i.congtrinh.x)),children:null==i?void 0:null===(e=i.congtrinh)||void 0===e?void 0:e.tenCT})}},{id:"viTriCT",label:"Địa điểm",align:"left",width:300,maxWidth:300,format:(n,i)=>{var e;return null==i?void 0:null===(e=i.congtrinh)||void 0===e?void 0:e.viTriCT}},{id:"loaiCT-tenLoaiCT",label:"Loại c\xf4ng tr\xecnh",align:"left",width:200,maxWidth:200,format:(n,i)=>{var e,l;return null==i?void 0:null===(l=i.congtrinh)||void 0===l?void 0:null===(e=l.loaiCT)||void 0===e?void 0:e.tenLoaiCT}},{id:"nguonNuocKT",label:"Nguồn nước khai th\xe1c",align:"left",width:300,format:(n,i)=>{var e;return null==i?void 0:null===(e=i.congtrinh)||void 0===e?void 0:e.nguonNuocKT}},{id:"luuvuc",label:"Lưu vực",align:"left",width:200,format:(n,i)=>{var e,l;return null==i?void 0:null===(l=i.congtrinh)||void 0===l?void 0:null===(e=l.luuvuc)||void 0===e?void 0:e.tenLVS}},{id:"mucdich_kt",label:"Lưu lượng cấp ph\xe9p",align:"left",children:[{id:"mucDich",label:"Mục đ\xedch",align:"left",minWidth:350,elm:n=>{var i,e;return null==n?void 0:null===(e=n.congtrinh)||void 0===e?void 0:null===(i=e.mucdich_kt)||void 0===i?void 0:i.map((n,i,e)=>(0,l.jsxs)(o.Z,{children:[n.mucDich,i<e.length-1?", ":""]},i))}},{id:"luuLuong",label:"Lưu lượng",align:"center",minWidth:150,elm:n=>{var i,e;return(null==n?void 0:null===(i=n.congtrinh)||void 0===i?void 0:i.tongLuuLuong)==0?null:null==n?void 0:null===(e=n.congtrinh)||void 0===e?void 0:e.tongLuuLuong}},{id:"donViTinhLuuLuong",label:"Đơn vị đo",align:"center",minWidth:150,elm:n=>{var i;return null==n?void 0:null===(i=n.congtrinh)||void 0===i?void 0:i.donViTinhLuuLuong}}]}]},{id:"tiencq",label:"Tiền cấp quyền",align:"left",children:[{id:"soQDTCQ",label:"Số QĐ",align:"left",minWidth:200,elm:n=>{var i;return null==n?void 0:null===(i=n.tiencq)||void 0===i?void 0:i.map((n,i)=>(0,l.jsx)(g.Z,{name:n.soQDTCQ,src:n.filePDF},i))}},{id:"ngayKy",label:"Ng\xe0y k\xfd",align:"left",minWidth:200,elm:n=>{var i;return null==n?void 0:null===(i=n.tiencq)||void 0===i?void 0:i.map((n,i)=>(0,l.jsx)(r.Z,{sx:{fontSize:14},children:(0,b.p6)(n.ngayKy)},i))}},{id:"tongTienCQ",label:"Tổng tiền",align:"left",minWidth:200,elm:n=>{var i;return null==n?void 0:null===(i=n.tiencq)||void 0===i?void 0:i.map((n,i)=>(0,l.jsx)(r.Z,{sx:{fontSize:14},children:(0,b.ao)(n.tongTienCQ)},i))}}]}];return(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(c.ZP,{container:!0,children:(0,l.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(0,l.jsx)(a.Z,{sx:{py:1,px:3},children:(0,l.jsxs)(r.Z,{variant:"overline",children:["Cấp ph\xe9p/",1==(0,f.Z)(R)?"Nước mặt":3==(0,f.Z)(R)?"Xả thải":7==(0,f.Z)(R)?"Nước dưới đất/Khai th\xe1c sử dụng":8==(0,f.Z)(R)?"Nước dưới đất/Thăm d\xf2":9==(0,f.Z)(R)?"Nước dưới đất/H\xe0nh nghề khoan":""]})})})}),(0,l.jsxs)(c.ZP,{container:!0,sx:{my:3},columnSpacing:3,children:[(0,l.jsx)(c.ZP,{item:!0,xs:12,md:3,children:(0,l.jsx)(a.Z,{sx:{height:"100%"},children:(0,l.jsx)(x.$O,{filter:{...E}})})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,md:9,sx:{position:"relative"},children:(0,l.jsxs)(a.Z,{sx:{height:"100%",p:1},children:["ktsd-nuoc-duoi-dat"===R||"td-nuoc-duoi-dat"===R||"hnk-nuoc-duoi-dat"===R?null:(0,l.jsxs)(o.Z,{className:"map-legend-license",sx:{background:"white",pl:2,zIndex:999,top:"15px",height:"unset"},children:[(0,l.jsx)(d.Z,{children:(0,l.jsx)(h.Z,{sx:{m:0},control:(0,l.jsx)(u.Z,{sx:{p:1},onClick:()=>i(!n)}),label:"Hiển thị t\xean c\xf4ng tr\xecnh"})}),(0,l.jsx)(_.Z,{})]}),(0,l.jsx)(o.Z,{sx:{height:"100%"},children:(0,l.jsx)(T,{center:G,showLabel:n,zoom:B,mapData:e})})]})})]}),(0,l.jsx)(c.ZP,{container:!0,spacing:3,children:(0,l.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(0,l.jsxs)(a.Z,{sx:{p:0,height:"100%"},children:[(0,l.jsx)(x.B0,{onChange:()=>{W(1),F(n=>!n)},onExport:{id:"license-data",fileName:"license-data"}}),(0,l.jsxs)(r.Z,{sx:{px:4,textAlign:"start"},variant:"subtitle1",children:["C\xf3",(0,l.jsx)("strong",{children:(0,l.jsxs)("em",{children:[" ",L," "]})}),"giấy ph\xe9p được cấp từ",(0,l.jsx)("strong",{children:(0,l.jsxs)("em",{children:[" ",E.tu_nam," "]})}),"đến",(0,l.jsx)("strong",{children:(0,l.jsxs)("em",{children:[" ",E.den_nam," "]})})]}),(0,l.jsx)(Z.Z,{id:"license-data",columns:nn,rows:P,loading:m,pagination:!0,page:w-1,rowsPerPage:z,totalItems:L,onPageChange:n=>{W(n+1)},onRowsPerPageChange:n=>{q(n),W(1)}})]})})})]})}},84247:function(n,i,e){var l=e(85893),t=e(67294),o=e(47407),s=e(60990),r=e(96788),c=e(77584),a=e(5531),d=e(11163);let h=n=>{let{nodes:i}=n;return(0,l.jsx)(o.Z,{sx:{p:0},children:i.map(n=>{var i;return(0,l.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",ml:4,mb:1},children:[(0,l.jsx)("img",{src:"/images/icon/".concat(n.id,".png"),alt:"icon",width:20}),(0,l.jsx)(r.Z,{variant:"overline",sx:{fontWeight:"bold",ml:1},children:n.label}),(null===(i=n.children)||void 0===i?void 0:i.length)>0&&(0,l.jsx)(h,{nodes:n.children})]},n.id)})})};i.Z=n=>{let{}=n,[i,e]=(0,t.useState)([]),o=(0,d.useRouter)();return(0,t.useEffect)(()=>{var n,i;let l=null===(n=o.query)||void 0===n?void 0:n.type;if("giay-phep"===(null===(i=o.query)||void 0===i?void 0:i.page)&&l){let n=(0,c.Z)(l);e((0,a.B)(n).consType)}},[o.query]),(0,l.jsx)("div",{children:(0,l.jsx)(t.Fragment,{children:i.map(n=>(0,l.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",ml:2},children:[(0,l.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:(0,l.jsx)(r.Z,{variant:"overline",sx:{fontWeight:"bold",ml:1},children:n.label})}),n.children.length>0&&(0,l.jsx)(h,{nodes:n.children})]},n.id))})})}},1201:function(n,i,e){var l=e(85893),t=e(93454),o=e(67294),s=e(64715),r=e(9984),c=e(67017),a=e(25615),d=e(88793),h=e(24570),u=e(78042),x=e(31536),g=e(98666);let p=n=>{let{x:i,y:e,width:t,height:o,value:s}=n;return 0===s||null==s||""===s?null:(0,l.jsx)("text",{x:i+t/2,y:e+o,fill:"#fff",textAnchor:"middle",dy:-6,children:s})},m=n=>{let{x:i,width:e,value:t}=n;return(0,l.jsx)("text",{x:i+e/2,y:20,fill:"#777",textAnchor:"middle",fontSize:"12px",style:{pointerEvents:"none"},children:"Tổng: ".concat(t)})},j=n=>{let{active:i,payload:e,label:o}=n;return i&&e&&e.length?(0,l.jsxs)(t.Z,{component:"div",sx:{padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #ccc"},children:[(0,l.jsxs)("p",{style:{margin:"0 0 5px 0",fontWeight:"bold"},children:["Năm: ",o]}),e.map((n,i)=>(0,l.jsxs)("p",{style:{margin:"3px 0",color:n.color},children:[n.name,": ",n.value]},i))]}):null};i.Z=n=>{let{series:i,year:e,color:t}=n,[f,Z]=(0,o.useState)([]),v=n=>{f.includes(n)?Z(f.filter(i=>i!==n)):Z(i=>[...i,n])},b=e.map((n,e)=>{let l={year:n};return i.forEach(n=>{l[n.name]=n.data[e]}),l});return(0,l.jsx)(s.h,{width:"100%",height:444,children:(0,l.jsxs)(r.v,{data:b,margin:{top:20,right:30,left:20,bottom:5},children:[(0,l.jsx)(c.q,{strokeDasharray:"3 3"}),(0,l.jsx)(a.K,{dataKey:"year",interval:0}),(0,l.jsx)(d.B,{}),(0,l.jsx)(h.u,{content:(0,l.jsx)(j,{})}),(0,l.jsx)(u.D,{height:36,iconType:"circle",onClick:n=>v(n.dataKey),wrapperStyle:{paddingTop:"10px"}}),i.map((n,i)=>(0,l.jsx)(x.$,{hide:f.includes(n.name),dataKey:n.name,fill:t[i],xAxisId:"value",barSize:50,stackId:"a",children:(0,l.jsx)(g.e,{dataKey:n.name,position:"center",content:p})},i)),(0,l.jsx)(a.K,{xAxisId:"value",hide:!0}),(0,l.jsx)(x.$,{dataKey:n=>i.reduce((i,e)=>i+(n[e.name]||0),0),xAxisId:"total",barSize:30,fill:"transparent",isAnimationActive:!1,children:(0,l.jsx)(g.e,{content:m})}),(0,l.jsx)(a.K,{xAxisId:"total",hide:!0})]})})}},81495:function(n,i,e){e.d(i,{vg:function(){return F},$O:function(){return X},_X:function(){return s},B0:function(){return R.Z},bu:function(){return H}}),e(87309),e(15371),e(32512),e(59175),e(34335);var l=e(85893),t=e(81873),o=e(60990),s=n=>{let{data:i,type:e}=n;if(i){let n,s;if(5===i.idLoaiGP)s="Giấy ph\xe9p thu hồi",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"secondary"});else switch(i.hieuluc_gp){case"het-hieu-luc":s="Hết hiệu lực",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"error"});break;case"sap-het-hieu-luc":s="Sắp hết hiệu lực",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"warning"});break;case"con-hieu-luc":s="C\xf2n hiệu lực",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"success"});break;case"da-bi-thu-hoi":s="Đ\xe3 bị thu hồi",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"secondary"});break;default:s="Kh\xf4ng x\xe1c định",n=(0,l.jsx)(t.Z,{variant:"outlined",sx:{fontStyle:"italic",fontSize:10,fontWeight:"bold"},label:s,size:"small",color:"default"})}return e&&"component"==e?(0,l.jsx)(o.Z,{children:n}):s}return null},r=e(67294),c=e(86142),a=e(9122),d=e(17071),h=e(71999),u=e(13440),x=e(448),g=e(72734),p=e(88196),m=e(40110),j=e(75486),f=e(36795),Z=e(88539),v=e(96788),b=e(93454),y=e(68573),_=e(25026),k=e(76592),C=e(70360),T=e(46577),S=e(8863),P=e(19827),N=e(95639),w=e(95587),W=e(50121),z=e(94395);let q=r.forwardRef(function(n,i){return(0,l.jsx)(j.Z,{direction:"left",ref:i,...n})}),L=(0,r.forwardRef)((n,i)=>{var e,t,c,a,d;let[h,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null);(0,r.useImperativeHandle)(i,()=>({openDetail:n=>{g(n),u(!0)}}));let j=()=>{u(!1),g(null)};return x?(0,l.jsx)(p.Z,{open:h,onClose:j,fullScreen:!0,TransitionComponent:q,className:"DialogControlShowPDF",sx:{zIndex:1201},children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(f.Z,{sx:{position:"sticky",top:0,zIndex:1201},children:(0,l.jsxs)(Z.Z,{children:[(0,l.jsx)(v.Z,{sx:{ml:2,flex:1,color:"#fff"},variant:"h6",component:"div",children:"Chi tiết Giấy Ph\xe9p"}),(0,l.jsx)(N.Z,{className:"btn",onClick:j})]})}),(0,l.jsx)(m.Z,{sx:{p:0,width:{xs:"100vw",md:"65vw"}},children:(0,l.jsxs)(o.Z,{sx:{padding:3},children:[(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Th\xf4ng Tin Chủ Giấy Ph\xe9p"}),(0,l.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(y.ZP,{item:!0,xs:6,children:(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"T\xean Chủ Giấy Ph\xe9p:"})," ",x.tochuc_canhan.tenTCCN]})}),(0,l.jsx)(y.ZP,{item:!0,xs:6,children:(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Địa Chỉ:"})," ",x.tochuc_canhan.diaChi]})})]})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Th\xf4ng tin Giấy Ph\xe9p"}),(0,l.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,l.jsxs)(y.ZP,{item:!0,xs:6,children:[(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Số Giấy Ph\xe9p:"})," ",x.soGP]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Ng\xe0y K\xfd:"})," ",(0,W.Z)(x.ngayKy)]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Thời Hạn:"})," ",x.thoiHan]})]}),(0,l.jsxs)(y.ZP,{item:!0,xs:6,children:[(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Cơ Quan Cấp Ph\xe9p:"})," ",x.coQuanCapPhep]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Loại h\xecnh:"})," ",null===(e=x.loaiGP)||void 0===e?void 0:e.tenLoaiGP]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Trạng Th\xe1i:"})," ",s({data:x,type:"string"})]})]})]})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Th\xf4ng Tin C\xf4ng Tr\xecnh"}),(0,l.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,l.jsxs)(y.ZP,{item:!0,xs:6,children:[(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"T\xean C\xf4ng Tr\xecnh:"})," ",x.congtrinh.tenCT]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Địa Chỉ:"})," ",x.congtrinh.viTriCT]})]}),(0,l.jsxs)(y.ZP,{item:!0,xs:6,children:[(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsx)("strong",{children:"Loại H\xecnh:"})," ",x.congtrinh.loaiCT.tenLoaiCT]}),(0,l.jsxs)(v.Z,{fontSize:14,mb:3,children:[(0,l.jsxs)("strong",{children:["Nguồn nước ",3!==x.congtrinh.loaiCT.idCha?"khai th\xe1c":"xả thải"," :"]})," ",x.congtrinh.nguonNuocKT]})]})]})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"T\xe0i liệu li\xean quan"}),(0,l.jsx)(_.Z,{component:b.Z,children:(0,l.jsxs)(k.Z,{children:[(0,l.jsx)(C.Z,{children:(0,l.jsx)(T.Z,{children:(0,l.jsx)(S.Z,{children:"T\xean t\xe0i liệu"})})}),(0,l.jsx)(P.Z,{children:(0,l.jsx)(T.Z,{children:(0,l.jsx)(S.Z,{children:(0,l.jsx)(w.Z,{name:(null===(t=x.fileGiayToLienQuan)||void 0===t?void 0:t.split("/").pop())||"",src:x.fileGiayToLienQuan})})})})]})})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Th\xf4ng tin tiền cấp quyền"}),(0,l.jsx)(_.Z,{component:b.Z,children:(0,l.jsxs)(k.Z,{children:[(0,l.jsx)(C.Z,{children:(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:"Quyết định cấp quyền"}),(0,l.jsx)(S.Z,{children:"Tổng tiền cấp quyền"})]})}),(0,l.jsx)(P.Z,{children:null===(c=x.tiencq)||void 0===c?void 0:c.map((n,i)=>(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:(0,l.jsx)(w.Z,{name:"".concat(null==n?void 0:n.soQDTCQ," - ").concat((0,W.Z)(null==n?void 0:n.ngayKy)),src:null==n?void 0:n.filePDF})}),(0,l.jsx)(S.Z,{children:(0,z.ao)(n.tongTienCQ)})]},i))})]})})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Lịch Sử Cấp Ph\xe9p"}),(0,l.jsx)(_.Z,{component:b.Z,children:(0,l.jsxs)(k.Z,{children:[(0,l.jsx)(C.Z,{children:(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:"Số giấy ph\xe9p"}),(0,l.jsx)(S.Z,{children:"Hiệu lực"}),(0,l.jsx)(S.Z,{children:"Nội Dung"})]})}),(0,l.jsx)(P.Z,{children:null===(a=x.lichSuCapPhep)||void 0===a?void 0:a.map((n,i)=>(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:(0,l.jsx)(w.Z,{name:"".concat(null==n?void 0:n.soGP," - ").concat((0,W.Z)(null==n?void 0:n.ngayKy)),src:null==n?void 0:n.fileGiayPhep})}),(0,l.jsx)(S.Z,{children:s({data:n,type:"component"})}),(0,l.jsx)(S.Z,{children:n.tenGP})]},i))})]})})]}),(0,l.jsxs)(b.Z,{sx:{marginBottom:3,padding:2},children:[(0,l.jsx)(v.Z,{variant:"overline",children:"Lịch Sử Cấp Ph\xe9p của tổ chức, c\xe1 nh\xe2n"}),(0,l.jsx)(_.Z,{component:b.Z,children:(0,l.jsxs)(k.Z,{children:[(0,l.jsx)(C.Z,{children:(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:"Số giấy ph\xe9p"}),(0,l.jsx)(S.Z,{children:"Hiệu lực"}),(0,l.jsx)(S.Z,{children:"Nội Dung"})]})}),(0,l.jsx)(P.Z,{children:null===(d=x.giayPhepCuaToChuc)||void 0===d?void 0:d.map((n,i)=>(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(S.Z,{children:(0,l.jsx)(w.Z,{name:"".concat(null==n?void 0:n.soGP," - ").concat((0,W.Z)(null==n?void 0:n.ngayKy)),src:null==n?void 0:n.fileGiayPhep})}),(0,l.jsx)(S.Z,{children:s({data:n,type:"component"})}),(0,l.jsx)(S.Z,{children:n.tenGP})]},i))})]})})]})]})})]})}):null});var D=e(21038),G=e(52857),I=e(25381),B=e(15972),K=e(51015),H=n=>{let{row:i,setPostSuccess:e,triggerRef:t,onApprove:o,onCancelApprove:s,permission:p}=n,[m,j]=(0,r.useState)(null),f=(0,r.useRef)(null),Z=()=>{j(null)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.Z,{title:"T\xf9y chọn",children:(0,l.jsx)(G.Z,{size:"small",onClick:n=>{j(n.currentTarget)},children:(0,l.jsx)(c.Z,{fontSize:"small"})})}),(0,l.jsxs)(I.Z,{anchorEl:m,open:!!m,onClose:Z,children:[(0,l.jsx)(B.Z,{children:(0,l.jsx)(K.Z,{className:"tableActionBtn",onClick:()=>{Z(),setTimeout(()=>{var n;return null===(n=f.current)||void 0===n?void 0:n.openDetail(i)},100)},variant:"text",startIcon:(0,l.jsx)(a.Z,{}),children:"Xem chi tiết"})}),p.EDIT?(0,l.jsx)(B.Z,{children:(0,l.jsx)(K.Z,{className:"tableActionBtn",onClick:()=>{Z(),setTimeout(()=>{var n;return null===(n=t.current)||void 0===n?void 0:n.handleOpenDialog("edit",i)},100)},variant:"text",startIcon:(0,l.jsx)(d.Z,{}),children:"Chỉnh sửa"})}):"",p.APPROVE?(0,l.jsx)(B.Z,{onClick:()=>{Z(),i.trangThaiCapPhep?s(i.id):o(i.id)},children:i.trangThaiCapPhep?(0,l.jsx)(K.Z,{className:"tableActionBtn",variant:"text",startIcon:(0,l.jsx)(h.Z,{}),children:"Hủy duyệt"}):(0,l.jsx)(K.Z,{className:"tableActionBtn",variant:"text",startIcon:(0,l.jsx)(u.Z,{}),children:"Ph\xea duyệt"})}):"",p.DELETE?(0,l.jsx)(B.Z,{children:(0,l.jsx)(x.Z,{url:"giay-phep",data:i,setPostSuccess:e})}):" "]}),(0,l.jsx)(g.Z,{ref:t,setPostSuccess:e}),(0,l.jsx)(L,{ref:f})]})},R=e(92131),A=e(97182),E=e(67543),Q=e(11163),F=n=>{var i,e,t,s,r,c,a,d,h,u,x,g,p,m,j,f,Z,b,_,k,C,T,S,P,N,w,W,z,q,L;let{data:D,loading:G}=n,I=(0,Q.useRouter)(),{basePath:B}=I,K=(n,i,e)=>{I.push({pathname:"/tai-nguyen-nuoc/giam-sat",query:{page:"giay-phep",type:"ktsd_nm"===n?"nuoc-mat":"ktsd_ndd"===n?"ktsd-nuoc-duoi-dat":"thamdo_ndd"===n?"td-nuoc-duoi-dat":"hnk_ndd"===n?"hnk-nuoc-duoi-dat":"xathai"===n?"xa-thai":"",hieuluc_gp:""==i?null:i,coquan_cp:e,loai_ct:"ktsd_nm"===n?1:"ktsd_ndd"===n?7:"thamdo_ndd"===n?8:"hnk_ndd"===n?9:"xathai"===n?3:0,loaihinh_cp:Number(I.query.loai_ct)||0,tang_chuanuoc:Number(I.query.loai_ct)||0,huyen:Number(I.query.loai_ct)||0,xa:Number(I.query.loai_ct)||0,tieuvung_qh:Number(I.query.loai_ct)||0,tochuc_canhan:Number(I.query.loai_ct)||0,tu_nam:Number(I.query.tu_nam)||new Date().getFullYear()-50,den_nam:Number(I.query.den_nam)||new Date().getFullYear()}})};return(0,l.jsxs)(y.ZP,{container:!0,children:[(0,l.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{p:2},children:(0,l.jsxs)(o.Z,{sx:{backgroundColor:"rgb(106, 179, 230)",borderRadius:1,p:2},children:[(0,l.jsxs)(v.Z,{p:2,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_nm"),children:["KTSD nước mặt"," : ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(i=D.ktsd_nm)||void 0===i?void 0:i.total]}),(0,l.jsxs)(y.ZP,{container:!0,sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(y.ZP,{item:!0,xs:4,sx:{p:2},children:(0,l.jsx)("img",{src:"".concat(B,"/images/constructionTypes/surfaceWater.png"),alt:"license_img",width:65,height:65})}),(0,l.jsxs)(y.ZP,{item:!0,xs:8,sx:{p:2},children:[(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_nm","con-hieu-luc"),children:["C\xf2n hiệu lực: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(e=D.ktsd_nm)||void 0===e?void 0:e.con_hieuluc]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_nm","het-hieu-luc"),children:["Hết hiệu lực:"," ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):(null===(t=D.ktsd_nm)||void 0===t?void 0:t.total)-(null===(s=D.ktsd_nm)||void 0===s?void 0:s.con_hieuluc)]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_nm","","BTNMT"),children:["BTNMT cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(r=D.ktsd_nm)||void 0===r?void 0:r.bo_cap]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_nm","","UBNDT"),children:["UBND Tỉnh cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(c=D.ktsd_nm)||void 0===c?void 0:c.tinh_cap]})]})]})]})}),(0,l.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{p:2},children:(0,l.jsxs)(o.Z,{sx:{backgroundColor:"rgb(0, 61, 126)",borderRadius:1,p:2},children:[(0,l.jsxs)(v.Z,{p:2,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_ndd"),children:["KTSD nước dưới đất"," : ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(a=D.ktsd_ndd)||void 0===a?void 0:a.total]}),(0,l.jsxs)(y.ZP,{container:!0,sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(y.ZP,{item:!0,xs:4,sx:{p:2},children:(0,l.jsx)("img",{src:"".concat(B,"/images/constructionTypes/probed.png"),alt:"license_img",width:65,height:65})}),(0,l.jsxs)(y.ZP,{item:!0,xs:8,sx:{p:2},children:[(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_ndd","con-hieu-luc"),children:["C\xf2n hiệu lực: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(d=D.ktsd_ndd)||void 0===d?void 0:d.con_hieuluc]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_ndd","het-hieu-luc"),children:["Hết hiệu lực:"," ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):(null===(h=D.ktsd_ndd)||void 0===h?void 0:h.total)-(null===(u=D.ktsd_ndd)||void 0===u?void 0:u.con_hieuluc)]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_ndd","","BTNMT"),children:["BTNMT cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(x=D.ktsd_ndd)||void 0===x?void 0:x.bo_cap]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("ktsd_ndd","","UBNDT"),children:["UBND Tỉnh cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(g=D.ktsd_ndd)||void 0===g?void 0:g.tinh_cap]})]})]})]})}),(0,l.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{p:2},children:(0,l.jsxs)(o.Z,{sx:{backgroundColor:"rgb(125, 95, 58)",borderRadius:1,p:2},children:[(0,l.jsxs)(v.Z,{p:2,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("thamdo_ndd"),children:["Thăm d\xf2 nước dưới đất"," : ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(p=D.thamdo_ndd)||void 0===p?void 0:p.total]}),(0,l.jsxs)(y.ZP,{container:!0,sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(y.ZP,{item:!0,xs:4,sx:{p:2},children:(0,l.jsx)("img",{src:"".concat(B,"/images/constructionTypes/probed.png"),alt:"license_img",width:65,height:65})}),(0,l.jsxs)(y.ZP,{item:!0,xs:8,sx:{p:2},children:[(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("thamdo_ndd","con-hieu-luc"),children:["C\xf2n hiệu lực: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(m=D.thamdo_ndd)||void 0===m?void 0:m.con_hieuluc]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("thamdo_ndd","het-hieu-luc"),children:["Hết hiệu lực:"," ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):(null===(j=D.thamdo_ndd)||void 0===j?void 0:j.total)-(null===(f=D.thamdo_ndd)||void 0===f?void 0:f.con_hieuluc)]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("thamdo_ndd","","BTNMT"),children:["BTNMT cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(Z=D.thamdo_ndd)||void 0===Z?void 0:Z.bo_cap]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("thamdo_ndd","","UBNDT"),children:["UBND Tỉnh cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(b=D.thamdo_ndd)||void 0===b?void 0:b.tinh_cap]})]})]})]})}),(0,l.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{p:2},children:(0,l.jsxs)(o.Z,{sx:{backgroundColor:"rgb(0, 178, 151)",borderRadius:1,p:2},children:[(0,l.jsxs)(v.Z,{p:2,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("hnk_ndd"),children:["H\xe0nh nghề khoan"," : ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(_=D.hnk_ndd)||void 0===_?void 0:_.total]}),(0,l.jsxs)(y.ZP,{container:!0,sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(y.ZP,{item:!0,xs:4,sx:{p:2},children:(0,l.jsx)("img",{src:"".concat(B,"/images/constructionTypes/drilling-practice.png"),alt:"license_img",width:65,height:65})}),(0,l.jsxs)(y.ZP,{item:!0,xs:8,sx:{p:2},children:[(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("hnk_ndd","con-hieu-luc"),children:["C\xf2n hiệu lực: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(k=D.hnk_ndd)||void 0===k?void 0:k.con_hieuluc]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("hnk_ndd","het-hieu-luc"),children:["Hết hiệu lực:"," ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):(null===(C=D.hnk_ndd)||void 0===C?void 0:C.total)-(null===(T=D.hnk_ndd)||void 0===T?void 0:T.con_hieuluc)]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("hnk_ndd","","BTNMT"),children:["BTNMT cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(S=D.hnk_ndd)||void 0===S?void 0:S.bo_cap]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("hnk_ndd","","UBNDT"),children:["UBND Tỉnh cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(P=D.hnk_ndd)||void 0===P?void 0:P.tinh_cap]})]})]})]})}),(0,l.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{p:2},children:(0,l.jsxs)(o.Z,{sx:{backgroundColor:"rgb(244, 153, 23)",borderRadius:1,p:2},children:[(0,l.jsxs)(v.Z,{p:2,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("xathai"),children:["Xả thải v\xe0o nguồn nước"," : ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(N=D.xathai)||void 0===N?void 0:N.total]}),(0,l.jsxs)(y.ZP,{container:!0,sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(y.ZP,{item:!0,xs:4,sx:{p:2},children:(0,l.jsx)(E.Z,{sx:{width:65,height:65,color:"#fff"}})}),(0,l.jsxs)(y.ZP,{item:!0,xs:8,sx:{p:2},children:[(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("xathai","con-hieu-luc"),children:["C\xf2n hiệu lực: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(w=D.xathai)||void 0===w?void 0:w.con_hieuluc]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("xathai","het-hieu-luc"),children:["Hết hiệu lực:"," ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):(null===(W=D.xathai)||void 0===W?void 0:W.total)-(null===(z=D.xathai)||void 0===z?void 0:z.con_hieuluc)]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("xathai","","BTNMT"),children:["BTNMT cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(q=D.xathai)||void 0===q?void 0:q.bo_cap]}),(0,l.jsxs)(v.Z,{variant:"body2",py:1,fontWeight:"bold",color:"#fff",sx:{cursor:"pointer"},onClick:()=>K("xathai","","UBNDT"),children:["UBND Tỉnh cấp: ",G?(0,l.jsx)(A.Z,{size:20,color:"inherit"}):null===(L=D.xathai)||void 0===L?void 0:L.tinh_cap]})]})]})]})})]})},M=e(56912),U=e(64577),X=n=>{let{filter:i,refreshTrigger:e}=n,[t,s]=(0,r.useState)({totalLicenses:0,validLicenses:0,expiringLicenses:0,expiredLicenses:0,revokedLicenses:0,pendingLicenses:0}),{basePath:c}=(0,Q.useRouter)();return(0,r.useEffect)(()=>{(async()=>{try{let n=await U.giayphepService.countLicenseFollowExpire(i);n&&s(n)}catch(n){console.error("Error fetching license statistics:",n)}})()},[i,e]),(0,l.jsxs)(o.Z,{sx:{width:"100%"},children:[(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Tổng số giấy ph\xe9p:"}),(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"red",children:t.totalLicenses})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/licensing.png"),alt:"logo"})})]})}),(0,l.jsx)(M.Z,{sx:{m:0}}),(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Giấy ph\xe9p c\xf2n hiệu lực:"}),(0,l.jsxs)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"green",children:[t.validLicenses,"/",t.totalLicenses]})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/licensing.png"),alt:"logo"})})]})}),(0,l.jsx)(M.Z,{sx:{m:0}}),(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Giấy ph\xe9p sắp hết hiệu lực:"}),(0,l.jsxs)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"orange",children:[t.expiringLicenses,"/",t.totalLicenses]})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/licensing-2.png"),alt:"logo"})})]})}),(0,l.jsx)(M.Z,{sx:{m:0}}),(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Giấy ph\xe9p hết hiệu lực:"}),(0,l.jsxs)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"red",children:[t.expiredLicenses,"/",t.totalLicenses]})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/licensing-3.png"),alt:"logo"})})]})}),(0,l.jsx)(M.Z,{sx:{m:0}}),(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Giấy ph\xe9p bị thu hồi:"}),(0,l.jsxs)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"red",children:[t.revokedLicenses,"/",t.totalLicenses]})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/expire.png"),alt:"logo"})})]})}),t.pendingLicenses>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.Z,{sx:{m:0}}),(0,l.jsx)(o.Z,{sx:{width:"100%",px:5,py:1},children:(0,l.jsxs)(o.Z,{sx:{display:"flex",p:1,bgcolor:"background.paper",borderRadius:1},children:[(0,l.jsxs)(o.Z,{sx:{flexGrow:1,alignItems:"center"},children:[(0,l.jsx)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"black",children:"Giấy ph\xe9p chờ duyệt:"}),(0,l.jsxs)(v.Z,{sx:{fontWeight:"bold"},variant:"body2",color:"blue",children:[t.pendingLicenses,"/",t.totalLicenses]})]}),(0,l.jsx)(o.Z,{children:(0,l.jsx)("img",{width:50,height:50,src:"".concat(c,"/images/licenses/pending.png"),alt:"logo"})})]})})]})]})};e(1201),e(84247)},59175:function(n,i,e){e.r(i);var l=e(85893),t=e(67294),o=e(93454),s=e(47687),r=e(64577),c=e(35376),a=e(92131),d=e(81495),h=e(1201),u=e(11163);i.default=()=>{let[n,i]=(0,t.useState)([]),[e,x]=(0,t.useState)({series:[],year:[],color:[]}),[g,p]=(0,t.useState)(!1),m=(0,u.useRouter)(),[j,f]=(0,t.useState)({page:m.query.page,type:m.query.type,so_gp:m.query.so_gp||null,cong_trinh:m.query.cong_trinh||null,coquan_cp:m.query.coquan_cp||null,loaihinh_cp:Number(m.query.loai_ct)||0,hieuluc_gp:m.query.hieuluc_gp||null,loai_ct:Number(m.query.loai_ct)||0,tang_chuanuoc:Number(m.query.loai_ct)||0,huyen:Number(m.query.loai_ct)||0,xa:Number(m.query.loai_ct)||0,tieuvung_qh:Number(m.query.loai_ct)||0,tochuc_canhan:Number(m.query.loai_ct)||0,tu_nam:Number(m.query.tu_nam)||new Date().getFullYear()-10,den_nam:Number(m.query.den_nam)||new Date().getFullYear(),...m.query});(0,t.useEffect)(()=>{f(n=>({...n,...m.query}))},[m.query]);let Z=(0,t.useRef)(!0);return(0,t.useEffect)(()=>(Z.current=!0,()=>{Z.current=!1}),[]),(0,t.useEffect)(()=>{(async()=>{p(!0),i(await (0,r.getData)("giay-phep/dem-theo-loai-ct")),x(await (0,r.getData)("giay-phep/thong-ke-gp",j).catch(n=>{console.error(n)}).finally(()=>{p(!1)}))})()},[j,m.query]),(0,l.jsxs)(s.Z,{container:!0,rowSpacing:5,pt:3,px:2,children:[(0,l.jsx)(d.vg,{data:n}),(0,l.jsx)(s.Z,{xs:12,sm:12,md:12,children:(0,l.jsxs)(o.Z,{elevation:3,children:[(0,l.jsx)(a.Z,{onChange:n=>{f(n)}}),g?(0,l.jsx)(c.Z,{}):(0,l.jsx)(h.Z,{series:e.series,year:e.year,color:e.color})]})})]})}}}]);