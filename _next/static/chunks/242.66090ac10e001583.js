"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{64715:function(e,n,t){t.d(n,{h:function(){return g}});var i=t(55865),a=t(67294),l=t(23493),o=t.n(l),r=t(83038),s=t(22073),c=t(48894);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){var i,a;i=n,a=t[n],(i=function(e){var n=function(e,n){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=u(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==u(n)?n:n+""}(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var g=(0,a.forwardRef)(function(e,n){var t,l=e.aspect,u=e.initialDimension,d=void 0===u?{width:-1,height:-1}:u,g=e.width,x=void 0===g?"100%":g,f=e.height,y=void 0===f?"100%":f,j=e.minWidth,p=void 0===j?0:j,v=e.minHeight,b=e.maxHeight,Z=e.children,T=e.debounce,S=void 0===T?0:T,M=e.id,P=e.className,w=e.onResize,L=e.style,D=(0,a.useRef)(null),C=(0,a.useRef)();C.current=w,(0,a.useImperativeHandle)(n,function(){return Object.defineProperty(D.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),D.current},configurable:!0})});var N=function(e){if(Array.isArray(e))return e}(t=(0,a.useState)({containerWidth:d.width,containerHeight:d.height}))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,a,l,o,r=[],s=!0,c=!1;try{for(l=(t=t.call(e)).next;!(s=(i=l.call(t)).done)&&(r.push(i.value),2!==r.length);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return r}}(t,2)||function(e,n){if(e){if("string"==typeof e)return m(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),k=N[0],G=N[1],W=(0,a.useCallback)(function(e,n){G(function(t){var i=Math.round(e),a=Math.round(n);return t.containerWidth===i&&t.containerHeight===a?t:{containerWidth:i,containerHeight:a}})},[]);(0,a.useEffect)(function(){var e=function(e){var n,t=e[0].contentRect,i=t.width,a=t.height;W(i,a),null===(n=C.current)||void 0===n||n.call(C,i,a)};S>0&&(e=o()(e,S,{trailing:!0,leading:!1}));var n=new ResizeObserver(e),t=D.current.getBoundingClientRect();return W(t.width,t.height),n.observe(D.current),function(){n.disconnect()}},[W,S]);var H=(0,a.useMemo)(function(){var e=k.containerWidth,n=k.containerHeight;if(e<0||n<0)return null;(0,s.Z)((0,r.hU)(x)||(0,r.hU)(y),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",x,y),(0,s.Z)(!l||l>0,"The aspect(%s) must be greater than zero.",l);var t=(0,r.hU)(x)?e:x,i=(0,r.hU)(y)?n:y;l&&l>0&&(t?i=t/l:i&&(t=i*l),b&&i>b&&(i=b)),(0,s.Z)(t>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",t,i,x,y,p,v,l);var o=!Array.isArray(Z)&&(0,c.Gf)(Z.type).endsWith("Chart");return a.Children.map(Z,function(e){return a.isValidElement(e)?(0,a.cloneElement)(e,h({width:t,height:i},o?{style:h({height:"100%",width:"100%",maxHeight:i,maxWidth:t},e.props.style)}:{})):e})},[l,Z,y,b,v,p,k,x]);return a.createElement("div",{id:M?"".concat(M):void 0,className:(0,i.Z)("recharts-responsive-container",P),style:h(h({},void 0===L?{}:L),{},{width:x,height:y,minWidth:p,minHeight:v,maxHeight:b}),ref:D},H)})},448:function(e,n,t){var i=t(85893),a=t(89090),l=t(21038),o=t(60990),r=t(52857),s=t(51423),c=t(44723),u=t(49986),d=t(51015),h=t(67294),m=t(64577);n.Z=e=>{let{url:n,data:t,setPostSuccess:g}=e,[x,f]=(0,h.useState)(null),y=!!x,j=()=>{f(null)},p=async e=>{let t=e.id;await (0,m.deleteData)("".concat(n),t),"function"==typeof g&&g(!0)},v=(0,h.useRef)(!0);return(0,h.useEffect)(()=>(v.current=!0,()=>{v.current=!1}),[]),(0,i.jsx)(l.Z,{title:"X\xf3a bản ghi?",children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(r.Z,{"aria-describedby":null==t?void 0:t.id,className:"tableActionBtn deleteBtn",onClick:e=>{f(e.currentTarget)},"data-row-id":null==t?void 0:t.id,size:"small",children:(0,i.jsx)(a.Z,{})}),(0,i.jsx)(s.ZP,{id:y?null==t?void 0:t.id:void 0,open:y,anchorEl:x,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsxs)(c.Z,{severity:"warning",children:["X\xf3a bản ghi n\xe0y ?",(0,i.jsx)(o.Z,{sx:{justifyContent:"center",paddingTop:4,width:"100%"},children:(0,i.jsxs)(u.Z,{variant:"outlined","aria-label":"outlined button group",children:[(0,i.jsx)(d.Z,{size:"small",onClick:()=>{x&&t&&p(t),f(null)},children:"Đ\xfang"}),(0,i.jsx)(d.Z,{color:"error",size:"small",onClick:j,children:"Hủy"})]})})]})})]})})}},53565:function(e,n,t){var i=t(85893),a=t(67294),l=t(93454),o=t(84166),r=t(88196),s=t(92365),c=t(52857),u=t(40110),d=t(61193),h=t.n(d),m=t(95639),g=t(46312);let x=e=>{let n=(0,a.useRef)(null);return(0,i.jsx)(h(),{handle:"#draggable-dialog-title",nodeRef:n,cancel:'[class*="MuiDialogContent-root"]',children:(0,i.jsx)(l.Z,{ref:n,...e})})};n.Z=e=>{let{children:n}=e,[t,l]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[f,y]=(0,a.useState)(!1),[j,p]=(0,a.useState)({width:1200,height:700}),v=()=>{l(null),h(null),y(!1),p({width:1200,height:700})};return(0,i.jsxs)(o.Z,{children:[n((e,n)=>{l(e),h(n),y(!0)},v),(0,i.jsx)(r.Z,{open:f,onClose:v,PaperComponent:x,"aria-labelledby":"draggable-dialog-title",PaperProps:{sx:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}},children:(0,i.jsxs)(g.e,{size:j,onResizeStop:(e,n,t,i)=>{p({width:j.width+i.width,height:j.height+i.height})},minWidth:400,minHeight:300,maxWidth:"100vw",maxHeight:"100vh",enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},children:[(0,i.jsxs)(s.Z,{style:{position:"sticky",left:0,right:0,top:0,cursor:"move",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#007fff",color:"#fff",paddingTop:5,paddingBottom:5,zIndex:9999999},id:"draggable-dialog-title",children:[d,(0,i.jsx)(c.Z,{onClick:v,children:(0,i.jsx)(m.Z,{sx:{color:"red"}})})]}),(0,i.jsx)(u.Z,{sx:{p:"1.25rem","&.MuiDialogContent-root":{padding:"1.25rem"}},children:t})]})})]})}},38138:function(e,n,t){var i=t(85893),a=t(67294),l=t(75486),o=t(84166),r=t(88196),s=t(36795),c=t(88539),u=t(96788),d=t(51015),h=t(40110),m=t(95639);let g=a.forwardRef(function(e,n){return(0,i.jsx)(l.Z,{direction:"left",ref:n,...e})});n.Z=e=>{let{children:n}=e,[t,l]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),p=()=>{l(null),f(null),j(!1)};return(0,i.jsxs)(o.Z,{children:[n((e,n)=>{l(e),f(n),j(!0)},p),(0,i.jsx)(r.Z,{open:y,onClose:p,fullScreen:!0,TransitionComponent:g,sx:{zIndex:1201},children:t&&(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(s.Z,{sx:{position:"relative"},children:(0,i.jsxs)(c.Z,{sx:{maxHeight:45,minHeight:45,position:"sticky",top:0},children:[(0,i.jsx)(u.Z,{sx:{ml:2,flex:1,color:"#fff"},variant:"h6",component:"div",children:x}),(0,i.jsx)(d.Z,{className:"btn closeBtn",sx:{p:2,mr:-2},onClick:p,children:(0,i.jsx)(m.Z,{})})]})}),(0,i.jsx)(h.Z,{children:t})]})})]})}},8897:function(e,n,t){var i=t(85893),a=t(96788),l=t(67294),o=t(11163);n.Z=()=>{let[e,n]=(0,l.useState)(new Date),{basePath:t}=(0,o.useRouter)();return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(e)},[]),(0,i.jsxs)(a.Z,{sx:{fontWeight:600,fontSize:"0.875rem",color:"blue",display:"flex",alignItems:"center",py:4},children:[(0,i.jsx)("img",{src:"".concat(t,"/images/icon/live.gif"),width:25,height:20,alt:"live"}),"\xa0Thời gian hiện tại: ",e.toLocaleString("zh-HK",{hour12:!1})]})}},67864:function(e,n,t){t.r(n),t.d(n,{default:function(){return eo}});var i=t(85893),a=t(67294),l=t(11163),o=t(68573),r=t(96788),s=t(29346),c=t(15972),u=t(6897),d=t(60990),h=t(39892),m=t(64577),g=t(448),x=t(40492),f=t(50333),y=t(97182),j=t(25026),p=t(93454),v=t(76592),b=t(70360),Z=t(46577),T=t(8863),S=t(19827),M=t(51015),P=t(96727),w=t(10586),L=t(50720),D=t(17389),C=t(13488),N=t(27484),k=t.n(N),G=t(68963),W=t(53839),H=t(53565);let E=[{id:9,name:"Sơn H\xe0"},{id:7,name:"Quảng Ng\xe3i"},{id:8,name:"Sơn Giang"},{id:4,name:"Gi\xe1 Vực"},{id:2,name:"Ba Tơ"},{id:10,name:"Tr\xe0 Bồng"},{id:3,name:"Đức Phổ"},{id:5,name:"Mộ Đức"}],B=[{name:"B\xe3o hoặc ATNĐ"},{name:"B\xe3o hoặc ATNĐ + KKL"},{name:"Dải HTNĐ + KKL"},{name:"KKL + đ\xf3n gi\xf3 đ\xf4ng"},{name:"H\xecnh thế thời tiết kh\xe1c"}],K=Array.from({length:24},(e,n)=>"".concat(n)),z=e=>{let{setPostSuccess:n,closeDialogs:t}=e,[l,r]=(0,a.useState)(k()().format("YYYY")),[s,c]=(0,a.useState)(k()()),[u,d]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[P,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){if(s){C(!0);try{let e=s.format("YYYY-MM-DD"),n=await (0,m.getData)("DuLieuTramDoMua/danh-sach?nam=".concat(l)),t={},i=null;n.forEach(e=>{Object.values(e).forEach(e=>{if(null==e?void 0:e.thoiGian){let n=k()(e.thoiGian);t["".concat(n.format("YYYY-MM-DD HH"),"-").concat(e.tramId)]=e.tongLuongMua.toString(),!i&&e.hinhTheGayMua&&(i=e.hinhTheGayMua)}})}),g(i);let a=K.map(n=>{let i="".concat(e," ").concat(n.padStart(2,"0"));return{thoiGian:i,readings:E.map(e=>({tramId:e.id,tongLuongMua:t["".concat(i,"-").concat(e.id)]||""}))}});d(a)}catch(e){console.error("Lỗi khi tải dữ liệu:",e)}finally{C(!1)}}}()},[s,l]);let N=async()=>{try{let e=u.filter(e=>e.readings.every(e=>""!==e.tongLuongMua));if(0===e.length){alert("Kh\xf4ng c\xf3 dữ liệu hợp lệ để lưu!");return}let i=e.flatMap(e=>e.readings.map(n=>({id:0,tramId:n.tramId,thoiGian:k()("".concat(l,"-").concat(k()(e.thoiGian).format("MM-DD HH:mm:ss")),"YYYY-MM-DD HH:mm:ss").format(),tongLuongMua:Number(n.tongLuongMua)||0,hinhTheGayMua:h,ghiChu:""})));console.log(i),await Promise.all(i.map(e=>(0,m.saveData)("DuLieuTramDoMua/luu",e))),n(!0),t()}catch(e){console.error("Lỗi khi lưu dữ liệu:",e),alert("C\xf3 lỗi xảy ra khi lưu dữ liệu!")}};return(0,i.jsxs)(o.ZP,{container:!0,spacing:4,py:5,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(x.Z,{label:"Nhập năm",value:l,onChange:e=>r(e.target.value),type:"number",fullWidth:!0})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(L._,{dateAdapter:w.y,children:(0,i.jsx)(D.M,{label:"Chọn ng\xe0y/th\xe1ng",views:["month","day"],value:s,onChange:c,format:"DD/MM",slotProps:{textField:{fullWidth:!0}}})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(f.Z,{value:B.find(e=>e.name===h)||null,onChange:(e,n)=>g(n?n.name:null),options:B,getOptionLabel:e=>e.name,renderInput:e=>(0,i.jsx)(x.Z,{...e,fullWidth:!0,label:"Chọn h\xecnh thế g\xe2y mưa"})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:P?(0,i.jsx)(y.Z,{}):(0,i.jsx)(j.Z,{component:p.Z,children:(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(b.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(T.Z,{children:"Giờ"}),E.map(e=>(0,i.jsx)(T.Z,{children:e.name},e.id))]})}),(0,i.jsx)(S.Z,{children:u.map((e,n)=>(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(T.Z,{children:n}),e.readings.map((e,t)=>(0,i.jsx)(T.Z,{children:(0,i.jsx)(x.Z,{size:"small",type:"number",value:e.tongLuongMua,onChange:e=>{let i=[...u];i[n].readings[t].tongLuongMua=e.target.value,d(i)}})},t))]},n))})]})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sx:{mt:2},children:(0,i.jsx)(M.Z,{variant:"contained",color:"primary",onClick:N,children:"Lưu dữ liệu"})})]})},I=e=>{let{data:n,setPostSuccess:t,closeDialogs:l}=e,[r,s]=(0,a.useState)({id:(null==n?void 0:n.id)||0,tramId:(null==n?void 0:n.tramId)||0,thoiGian:k()(null==n?void 0:n.thoiGian)||null,hinhTheGayMua:(null==n?void 0:n.hinhTheGayMua)||null,tongLuongMua:(null==n?void 0:n.tongLuongMua)||null,ghiChu:(null==n?void 0:n.ghiChu)||null}),[c,u]=(0,a.useState)(!1),d=e=>n=>{s({...r,[e]:n})},h=async e=>{e.preventDefault(),(async()=>{u(!0);try{await (0,m.saveData)("DuLieuTramDoMua/luu",{...r,thoiGian:k()(r.thoiGian).format()})&&(s({id:0,tramId:0,thoiGian:null,tongLuongMua:0,hinhTheGayMua:"",ghiChu:""}),"function"==typeof t&&t(!0),l())}catch(e){console.log(e)}finally{u(!1)}})()},g=()=>{s({id:0,tramId:0,thoiGian:null,tongLuongMua:0,hinhTheGayMua:"",ghiChu:""}),l()};return(0,i.jsxs)("form",{onSubmit:h,children:[(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:12,sx:{my:2},children:(0,i.jsx)(L._,{dateAdapter:w.y,children:(0,i.jsx)(C.x,{label:"Thời gian đo",value:r.thoiGian||null,onChange:e=>s({...r,thoiGian:e}),slotProps:{textField:{size:"small",fullWidth:!0}}})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(f.Z,{value:B.find(e=>e.name===r.hinhTheGayMua)||null,onChange:(e,n)=>d("hinhTheGayMua")(n?n.name:""),options:B,getOptionLabel:e=>e.name,renderInput:e=>(0,i.jsx)(x.Z,{...e,fullWidth:!0,label:"Chọn h\xecnh thế g\xe2y mưa",size:"small"})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:12,sx:{my:2},children:(0,i.jsx)(x.Z,{size:"small",type:"text",fullWidth:!0,label:"Lượng mưa trạm",placeholder:"",value:(null==r?void 0:r.tongLuongMua)||"",onChange:e=>{d("tongLuongMua")(e.target.value)}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:12,sx:{my:2},children:(0,i.jsx)(x.Z,{size:"small",type:"text",fullWidth:!0,label:"Ghi ch\xfa",placeholder:"",value:(null==r?void 0:r.ghiChu)||"",onChange:e=>{d("ghiChu")(e.target.value)}})})]}),(0,i.jsxs)(P.Z,{sx:{p:0},children:[(0,i.jsx)(M.Z,{onClick:()=>g(),className:"btn cancleBtn",children:"Hủy"}),(0,i.jsxs)(M.Z,{type:"submit",disabled:c,className:"btn saveBtn",children:[" ",c?(0,i.jsx)(y.Z,{color:"inherit",size:20}):(0,i.jsx)(G.Z,{})," \xa0 Lưu"," "]})]})]})};var A=e=>{let{data:n,isEdit:t,setPostSuccess:a}=e,l=t?"Cập nhật dữ liệu quan trắc mưa":"Th\xeam dữ liệu mưa";return(0,i.jsx)(H.Z,{children:(e,o)=>(0,i.jsx)(d.Z,{children:t?(0,i.jsx)(M.Z,{variant:t?"text":"outlined",size:"small",fullWidth:!0,color:"primary",startIcon:!t&&(0,i.jsx)(W.Z,{}),onClick:()=>e((0,i.jsx)(I,{data:n,setPostSuccess:a,closeDialogs:o}),l),children:(()=>{let e=Number(n.tongLuongMua);return 0===e?(0,i.jsxs)("span",{style:{color:"#0000FF"},children:[e," "]}):e>0&&e<=5?(0,i.jsxs)("span",{style:{color:"#76c7c0"},children:[e," "]}):e>5&&e<=15?(0,i.jsxs)("span",{style:{color:"#008000"},children:[e," "]}):e>15&&e<=50?(0,i.jsxs)("span",{style:{color:"#FFD700"},children:[e," "]}):e>50&&e<=100?(0,i.jsxs)("span",{style:{color:"#FF8C00"},children:[e," "]}):e>100?(0,i.jsxs)("span",{style:{color:"#FF0000"},children:[e," "]}):e})()}):(0,i.jsx)(M.Z,{variant:t?"text":"outlined",size:"small",fullWidth:!0,color:"primary",startIcon:!t&&(0,i.jsx)(W.Z,{}),onClick:()=>e((0,i.jsx)(z,{data:n,setPostSuccess:a,closeDialogs:o}),l),children:"Cập nhật dữ liệu"})})})};let O=!1,F=()=>{O||(console.warn("MUI: The LocalizationProvider component was moved from `@mui/lab` to `@mui/x-date-pickers`.\n\nYou should use `import { LocalizationProvider } from '@mui/x-date-pickers'`\nor `import { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider'`\n\nMore information about this migration on our blog: https://mui.com/blog/lab-date-pickers-to-mui-x/."),O=!0)},V=a.forwardRef(function(){return F(),null}),R=!1,Y=()=>{R||(console.warn("MUI: The DatePicker component was moved from `@mui/lab` to `@mui/x-date-pickers`.\n\nYou should use `import { DatePicker } from '@mui/x-date-pickers'`\nor `import { DatePicker } from '@mui/x-date-pickers/DatePicker'`\n\nMore information about this migration on our blog: https://mui.com/blog/lab-date-pickers-to-mui-x/."),R=!0)},Q=a.forwardRef(function(){return Y(),null});var q=t(8897),U=t(64715),_=t(10723),X=t(67017),$=t(25615),J=t(88793),ee=t(24570),en=t(78042),et=t(31712),ei=t(38138);let ea=e=>e&&Array.isArray(e)?e.map(e=>{var n,t,i,a,l,o,r,s,c,u,d,h,m,g,x,f,y,j,p,v,b,Z,T,S,M,P,w;return{date:(null===(n=e.thoiGian)||void 0===n?void 0:n.replace("T"," "))||"",SonHa:null!==(x=null===(t=e.sonHa)||void 0===t?void 0:t.tongLuongMua)&&void 0!==x?x:null,QuangNgai:null!==(f=null===(i=e.quangNgai)||void 0===i?void 0:i.tongLuongMua)&&void 0!==f?f:null,SonGiang:null!==(y=null===(a=e.sonGiang)||void 0===a?void 0:a.tongLuongMua)&&void 0!==y?y:null,GiaVuc:null!==(j=null===(l=e.giaVuc)||void 0===l?void 0:l.tongLuongMua)&&void 0!==j?j:null,BaTo:null!==(p=null===(o=e.baTo)||void 0===o?void 0:o.tongLuongMua)&&void 0!==p?p:null,DucPho:null!==(v=null===(r=e.ducPho)||void 0===r?void 0:r.tongLuongMua)&&void 0!==v?v:null,MoDuc:null!==(b=null===(s=e.moDuc)||void 0===s?void 0:s.tongLuongMua)&&void 0!==b?b:null,TraBong:null!==(Z=null===(c=e.traBong)||void 0===c?void 0:c.tongLuongMua)&&void 0!==Z?Z:null,MinhLong:null!==(T=null===(u=e.minhLong)||void 0===u?void 0:u.tongLuongMua)&&void 0!==T?T:null,SongVe:null!==(S=null===(d=e.songVe)||void 0===d?void 0:d.tongLuongMua)&&void 0!==S?S:null,TayTra:null!==(M=null===(h=e.tayTra)||void 0===h?void 0:h.tongLuongMua)&&void 0!==M?M:null,SonTay:null!==(P=null===(m=e.sonTay)||void 0===m?void 0:m.tongLuongMua)&&void 0!==P?P:null,TraMy:null!==(w=null===(g=e.traMy)||void 0===g?void 0:g.tongLuongMua)&&void 0!==w?w:null}}).filter(e=>e.date):[];var el=e=>{let{apiData:n}=e,[t,l]=(0,a.useState)([]),[o,h]=(0,a.useState)("null");return(0,a.useEffect)(()=>{n&&l(ea(n))},[n]),(0,i.jsx)(ei.Z,{children:e=>(0,i.jsxs)(d.Z,{className:"p-4 bg-white shadow-lg rounded-xl",children:[(0,i.jsx)(r.Z,{className:"text-xl font-bold mb-4 text-center",children:"Biểu đồ lượng mưa theo giờ"}),(0,i.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,i.jsx)(u.Z,{sx:{minWidth:200},children:(0,i.jsxs)(s.Z,{value:o,onChange:n=>{let a=n.target.value;h(a),"null"!==a&&e((0,i.jsxs)(d.Z,{p:2,children:[(0,i.jsxs)(r.Z,{variant:"h6",textAlign:"center",children:["Biểu đồ lượng mưa - ","Tất cả trạm"===a?"Tất cả trạm":a]}),(0,i.jsx)(U.h,{width:"100%",height:450,children:(0,i.jsxs)(_.w,{data:t,margin:{top:20,right:80,left:20,bottom:80},children:[(0,i.jsx)(X.q,{strokeDasharray:"3 3"}),(0,i.jsx)($.K,{dataKey:"date",angle:-30,textAnchor:"end",dy:10,interval:1,tickFormatter:e=>e.split(" ")[0]+"\n"+e.split(" ")[1]}),(0,i.jsx)(J.B,{label:{value:"mm",angle:-90,position:"insideLeft"}}),(0,i.jsx)(ee.u,{}),(0,i.jsx)(en.D,{layout:"vertical",align:"right",verticalAlign:"middle"}),("Tất cả trạm"===a||"SonHa"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"SonHa",stroke:"#8884d8",name:"Sơn H\xe0",connectNulls:!0}),("Tất cả trạm"===a||"QuangNgai"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"QuangNgai",stroke:"#82ca9d",name:"Quảng Ng\xe3i",connectNulls:!0}),("Tất cả trạm"===a||"SonGiang"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"SonGiang",stroke:"#ffc658",name:"Sơn Giang",connectNulls:!0}),("Tất cả trạm"===a||"GiaVuc"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"GiaVuc",stroke:"#d84a4a",name:"Gi\xe1 Vực",connectNulls:!0}),("Tất cả trạm"===a||"BaTo"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"BaTo",stroke:"#4a90e2",name:"Ba Tơ",connectNulls:!0}),("Tất cả trạm"===a||"DucPho"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"DucPho",stroke:"#ff6347",name:"Đức Phổ",connectNulls:!0}),("Tất cả trạm"===a||"MoDuc"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"MoDuc",stroke:"#ffa07a",name:"Mộ Đức",connectNulls:!0}),("Tất cả trạm"===a||"TraBong"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"TraBong",stroke:"#20b2aa",name:"Tr\xe0 Bồng",connectNulls:!0}),("Tất cả trạm"===a||"MinhLong"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"MinhLong",stroke:"#ff4500",name:"Minh Long",connectNulls:!0}),("Tất cả trạm"===a||"SongVe"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"SongVe",stroke:"#1e90ff",name:"S\xf4ng Vệ",connectNulls:!0}),("Tất cả trạm"===a||"TayTra"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"TayTra",stroke:"#32cd32",name:"Tr\xe0 T\xe2y",connectNulls:!0}),("Tất cả trạm"===a||"SonTay"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"SonTay",stroke:"#ff1493",name:"Sơn T\xe2y",connectNulls:!0}),("Tất cả trạm"===a||"TraMy"===a)&&(0,i.jsx)(et.x,{type:"monotone",dataKey:"TraMy",stroke:"#8a2be2",name:"Tr\xe0 My",connectNulls:!0})]})})]}),"Biểu đồ lượng mưa - ".concat("Tất cả trạm"===a?"Tất cả trạm":a))},displayEmpty:!0,children:[(0,i.jsx)(c.Z,{value:"null",children:"Mời chọn trạm"}),(0,i.jsx)(c.Z,{value:"Tất cả trạm",children:"Xem tất cả trạm"}),(0,i.jsx)(c.Z,{value:"SonHa",children:"Sơn H\xe0"}),(0,i.jsx)(c.Z,{value:"QuangNgai",children:"Quảng Ng\xe3i"}),(0,i.jsx)(c.Z,{value:"SonGiang",children:"Sơn Giang"}),(0,i.jsx)(c.Z,{value:"GiaVuc",children:"Gi\xe1 Vực"}),(0,i.jsx)(c.Z,{value:"BaTo",children:"Ba Tơ"}),(0,i.jsx)(c.Z,{value:"DucPho",children:"Đức Phổ"}),(0,i.jsx)(c.Z,{value:"MoDuc",children:"Mộ Đức"}),(0,i.jsx)(c.Z,{value:"TraBong",children:"Tr\xe0 Bồng"}),(0,i.jsx)(c.Z,{value:"MinhLong",children:"Minh Long"}),(0,i.jsx)(c.Z,{value:"SongVe",children:"S\xf4ng Vệ"}),(0,i.jsx)(c.Z,{value:"TayTra",children:"T\xe2y Tr\xe0"}),(0,i.jsx)(c.Z,{value:"SonTay",children:"Sơn T\xe2y"}),(0,i.jsx)(c.Z,{value:"TraMy",children:"Tr\xe0 My"})]})})})]})})},eo=()=>{let[e,n]=(0,a.useState)([]),[t,x]=(0,a.useState)([]),[f,y]=(0,a.useState)("all"),[j,p]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),[Z,T]=(0,a.useState)({page:"du-lieu-mua",type:"hinh-the-gay-mua-lon",hinhThe:"0",luongMua:"",tenTram:""});console.log(e=>{y(e.target.value)});let S=(0,l.useRouter)(),{hinhThe:M,luongMua:P,tenTram:L}=S.query;(0,a.useEffect)(()=>{T({page:"du-lieu-mua",type:"hinh-the-gay-mua-lon",hinhThe:M||"0",luongMua:P||"",tenTram:L||""})},[M,P,S.query,L]);let D=(e,n)=>{T(t=>({...t,[e]:n}))},C=()=>{p(e=>!e)};(0,a.useEffect)(()=>{!async function(){b(!0);try{let e=await (0,m.getData)("DuLieuTramDoMua/danh-sach?nam=".concat(2017));n(e);let t=await (0,m.getData)("DuLieuTramDoMua/nam");x(t)}catch(e){console.log(e)}finally{b(!1)}}()},[j,2017]);let N=[{id:"stt",label:"STT",align:"center",minWidth:60},{id:"nam",label:"Năm",align:"center",minWidth:60},{id:"sttTranLu",label:"Thời gian mưa",align:"center",children:[{id:"thang",label:"Th\xe1ng",align:"left",minWidth:60},{id:"ngay",label:"Ng\xe0y",align:"left",minWidth:60},{id:"gio",label:"Giờ",align:"left",minWidth:60},{id:"hinhTheGayMua",label:(0,i.jsxs)("span",{children:[" ","H\xecnh thế ",(0,i.jsx)("br",{})," g\xe2y mưa ",(0,i.jsx)("br",{})]}),align:"center",minWidth:80}]},{id:"#",label:"Lượng mưa quan trắc tại trạm(mm)",children:[{id:"SonHa",label:"Sơn H\xe0",elm:e=>e.sonHa?(0,i.jsx)(A,{data:e.sonHa,setPostSuccess:C,isEdit:!0}):"-",align:"left",minWidth:50},{id:"QuangNgai",label:"Quảng Ng\xe3i",align:"left",minWidth:50,elm:e=>e.quangNgai?(0,i.jsx)(A,{data:e.quangNgai,setPostSuccess:C,isEdit:!0}):"-"},{id:"QuangNgai",label:"Sơn Giang",align:"left",minWidth:50,elm:e=>e.quangNgai?(0,i.jsx)(A,{data:e.sonGiang,setPostSuccess:C,isEdit:!0}):"-"},{id:"GiaVuc",label:"Gi\xe1 Vực",align:"left",minWidth:80,elm:e=>e.giaVuc?(0,i.jsx)(A,{data:e.giaVuc,setPostSuccess:C,isEdit:!0}):"-"},{id:"bato",label:"Ba Tơ",align:"left",minWidth:70,elm:e=>e.baTo?(0,i.jsx)(A,{data:e.baTo,setPostSuccess:C,isEdit:!0}):"-"},{id:"trabong",label:"Tr\xe0 Bồng",align:"left",minWidth:80,elm:e=>e.traBong?(0,i.jsx)(A,{data:e.traBong,setPostSuccess:C,isEdit:!0}):"-"},{id:"ducpho",label:"Đức Phổ",align:"left",minWidth:80,elm:e=>e.ducPho?(0,i.jsx)(A,{data:e.ducPho,setPostSuccess:C,isEdit:!0}):"-"},{id:"moduc",label:"Mộ Đức",align:"left",minWidth:80,elm:e=>e.moDuc?(0,i.jsx)(A,{data:e.moDuc,setPostSuccess:C,isEdit:!0}):"-"},{id:"minhlong",label:"Minh Long",align:"left",minWidth:80,elm:e=>e.minhLong?(0,i.jsx)(A,{data:e.minhLong,setPostSuccess:C,isEdit:!0}):"-"},{id:"moduc",label:"S\xf4ng Vệ",align:"left",minWidth:80,elm:e=>e.songVe?(0,i.jsx)(A,{data:e.songVe,setPostSuccess:C,isEdit:!0}):"-"},{id:"ducpho",label:"T\xe2y Tr\xe0",align:"left",minWidth:80,elm:e=>e.tayTra?(0,i.jsx)(A,{data:e.tayTra,setPostSuccess:C,isEdit:!0}):"-"},{id:"moduc",label:"Sơn T\xe2y",align:"left",minWidth:80,elm:e=>e.sonTay?(0,i.jsx)(A,{data:e.sonTay,setPostSuccess:C,isEdit:!0}):"-"},{id:"moduc",label:"Tr\xe0 My",align:"left",minWidth:80,elm:e=>e.traMy?(0,i.jsx)(A,{data:e.traMy,setPostSuccess:C,isEdit:!0}):"-"}]},{id:"actions",label:"Thao t\xe1c",align:"center",minWidth:100}];return(0,i.jsxs)(o.ZP,{item:!0,xs:12,container:!0,spacing:2,children:[(0,i.jsxs)(o.ZP,{className:"_text_center",sx:{textAlign:"center",mt:3},children:[(0,i.jsx)(r.Z,{className:"font-weight-bold",variant:"h6",sx:{color:"blue",textAlign:"center"},children:"LƯỢNG MƯA QUAN TRẮC TẠI C\xc1C TRẠM TR\xcaN LƯU VỰC S\xd4NG TR\xc0 KH\xdaC"}),"(Kỳ b\xe1o c\xe1o:"," ",(0,i.jsx)(V,{dateAdapter:w.y,children:(0,i.jsx)(Q,{views:["year"],value:k()(new Date(2017,1,1)),onChange:e=>(function(e){throw Error("Function not implemented.")})(e.year()),slotProps:{textField:{size:"small",fullWidth:!0,required:!0}},sx:{width:"100px"}})}),")",(0,i.jsx)(q.Z,{})]}),(0,i.jsxs)(o.ZP,{xs:12,container:!0,spacing:1,children:[(0,i.jsxs)(o.ZP,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,i.jsx)(r.Z,{noWrap:!0,sx:{fontWeight:"bold",fontSize:"10pt"},children:"Chọn năm điển h\xecnh"}),(0,i.jsxs)(s.Z,{variant:"outlined",size:"small",fullWidth:!0,value:2017,children:[(0,i.jsxs)(c.Z,{value:new Date().getFullYear(),children:["Hiện tại: ",new Date().getFullYear()]}),t.map(e=>(0,i.jsx)(c.Z,{value:e,children:e},e))]})]}),(0,i.jsx)(o.ZP,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",mb:1},children:(0,i.jsx)(u.Z,{fullWidth:!0,children:(0,i.jsxs)(s.Z,{size:"small",value:Z.hinhThe,onChange:e=>D("hinhThe",e.target.value),children:[(0,i.jsx)(c.Z,{value:"0",children:"Chọn h\xecnh thế thời tiết"}),(0,i.jsx)(c.Z,{value:"A",children:"(A) B\xe3o hoặc ATNĐ hoặc \xe1p thấp"}),(0,i.jsx)(c.Z,{value:"B",children:"(B) B\xe3o hoặc ATNĐ + KKL"}),(0,i.jsx)(c.Z,{value:"C",children:"(C) Giải HTNĐ + KKL"}),(0,i.jsx)(c.Z,{value:"D",children:"(D) KKL + đới gi\xf3 đ\xf4ng"}),(0,i.jsx)(c.Z,{value:"E",children:"(E) Tổ hợp h\xecnh thế thời tiết kh\xe1c"}),(0,i.jsx)(c.Z,{value:"F",children:"(F) Tổ hợp c\xe1c h\xecnh thế tr\xean"})]})})}),(0,i.jsx)(o.ZP,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",mb:1,fontSize:"10pt"},children:(0,i.jsx)(A,{setPostSuccess:C,isEdit:!1})}),(0,i.jsx)(o.ZP,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",mb:1},children:(0,i.jsx)(el,{apiData:e,selectedStation:f})})]}),(0,i.jsxs)(o.ZP,{container:!0,sx:{display:"flex",alignItems:"center",mb:2,fontSize:"10pt"},children:[(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#0000FF"},children:"■"})," Kh\xf4ng mưa (0 mm)"]})}),(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#76c7c0"},children:"■"})," Kh\xf4ng đ\xe1ng kể (0 - 5 mm)"]})}),(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#008000"},children:"■"})," Nhỏ (5 - 15 mm)"]})}),(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#FFD700"},children:"■"})," Vừa (15 - 50 mm)"]})}),(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#FF8C00"},children:"■"})," Lớn (50 - 100 mm)"]})}),(0,i.jsx)(o.ZP,{item:!0,xs:2,children:(0,i.jsxs)(r.Z,{variant:"body2",children:[(0,i.jsx)("span",{style:{color:"#FF0000"},children:"■"})," Rất lớn"," "]})})]}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(h.Z,{columns:N,rows:e,loading:v,pagination:!0,actions:e=>(0,i.jsx)(d.Z,{className:"group_btn",children:(0,i.jsx)(g.Z,{url:"#",data:e,setPostSuccess:C})})})})]})}},38776:function(e,n,t){t.d(n,{Z:function(){return i}});function i(e,n){if(!e)throw Error("Invariant failed")}}}]);