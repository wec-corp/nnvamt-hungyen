"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5986],{77584:function(n,e){e.Z=n=>{if(!n)return 0;switch(n){case"nuoc-mat":return 1;case"nuoc-duoi-dat":return 2;case"ktsd-nuoc-duoi-dat":return 7;case"td-nuoc-duoi-dat":return 8;case"hnk-nuoc-duoi-dat":return 9;case"xa-thai":return 3;default:return 0}}},95906:function(n,e,a){var t=a(11163),i=a(67294),c=a(77584);e.Z=()=>{let{query:n}=(0,t.useRouter)();return{consFilter:(0,i.useMemo)(()=>({page:n.page,type:n.type,tenct:"",loai_ct:(0,c.Z)(null==n?void 0:n.type),huyen:Number(n.huyen)||0,xa:Number(n.xa)||0,song:Number(n.song)||0,luuvuc:Number(n.luuvuc)||0,tieu_luuvuc:Number(n.tieu_luuvuc)||0,tang_chuanuoc:Number(n.tang_chuanuoc)||0,nguonnuoc_kt:""}),[n]),licFilter:(0,i.useMemo)(()=>({page:"string"==typeof n.page?n.page:Array.isArray(n.page)?n.page[0]:void 0,type:"string"==typeof n.type?n.type:Array.isArray(n.type)?n.type[0]:void 0,so_gp:"string"==typeof n.so_gp?n.so_gp:Array.isArray(n.so_gp)?n.so_gp[0]:void 0,cong_trinh:"string"==typeof n.cong_trinh?n.cong_trinh:Array.isArray(n.cong_trinh)?n.cong_trinh[0]:void 0,coquan_cp:"string"==typeof n.coquan_cp?n.coquan_cp:Array.isArray(n.coquan_cp)?n.coquan_cp[0]:void 0,loaihinh_cp:Number(n.loaihinh_cp)||0,hieuluc_gp:"string"==typeof n.hieuluc_gp?n.hieuluc_gp:Array.isArray(n.hieuluc_gp)?n.hieuluc_gp[0]:void 0,loai_ct:Number(n.loai_ct)||(0,c.Z)("string"==typeof n.type?n.type:Array.isArray(n.type)?n.type[0]:""),tang_chuanuoc:Number(n.tang_chuanuoc)||0,huyen:Number(n.huyen)||0,xa:Number(n.xa)||0,tieuvung_qh:Number(n.tieuvung_qh)||0,tochuc_canhan:Number(n.tochuc_canhan)||0,tu_nam:Number(n.tu_nam)||new Date().getFullYear()-5,den_nam:Number(n.den_nam)||new Date().getFullYear()}),[n])}}},5531:function(n,e,a){a.d(e,{B:function(){return t}});let t=(n,e)=>{switch(n){case 1:return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc"]};case 2:return{consType:[{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]}],initialItems:["nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd"]};case 3:return{consType:[{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]};default:if(e)switch(e){case"nuoc-mat":return{consType:[],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","conglaynuoc","nhamaynuoc"]};case"ktsd-nuoc-duoi-dat":return{consType:[],initialItems:["giengkhoan","giengdao"]};case"td-nuoc-duoi-dat":return{consType:[],initialItems:["thamdo"]};case"hnk-nuoc-duoi-dat":return{consType:[],initialItems:["hanhnghekhoan"]}}return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]},{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]},{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc","nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd","xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]}}}},72246:function(n,e,a){var t=a(85893);a(67294);var i=a(12166),c=a(65806),u=a(56894),l=a(47407),h=a(60990),r=a(96788),o=a(5531);e.Z=n=>{let{consType:e=0,selectedItems:a,onTypeChange:d,showLabel:s,setShowLabel:g}=n,m=(0,o.B)(e).consType,_=n=>{let e=[],a=n=>{var t;null===(t=n.children)||void 0===t||t.forEach(n=>{e.push(n.id),a(n)})},t=m.find(e=>e.id===n);return t&&a(t),e},p=n=>{let e;if(a.includes(n)){let t=_(n);e=a.filter(e=>e!==n&&!t.includes(e))}else{let t=_(n);e=[...a,n,...t.filter(n=>!a.includes(n))]}d(e)},b=n=>(0,t.jsx)(l.Z,{sx:{p:0},children:n.map(n=>{var e,u;return(0,t.jsxs)(h.Z,{sx:{ml:(null===(e=n.children)||void 0===e?void 0:e.length)?0:4},children:[(0,t.jsx)(c.Z,{control:(0,t.jsx)(i.Z,{checked:a.includes(n.id),indeterminate:!!(null===(u=n.children)||void 0===u?void 0:u.length)&&n.children.some(n=>a.includes(n.id))&&!a.includes(n.id),onChange:()=>p(n.id)}),label:(0,t.jsxs)(r.Z,{variant:"overline",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[!n.children&&(0,t.jsx)("img",{src:"/images/icon/".concat(n.id,".png"),alt:"icon",width:20}),(0,t.jsxs)("span",{children:["\xa0",n.label]})]})}),n.children&&b(n.children)]},n.id)})});return(0,t.jsxs)(h.Z,{px:4,children:[(0,t.jsx)(u.Z,{children:(0,t.jsx)(c.Z,{control:(0,t.jsx)(i.Z,{checked:s,onChange:()=>g(!s)}),label:"Hiển thị t\xean c\xf4ng tr\xecnh"})}),b(m)]})}},5986:function(n,e,a){a.r(e);var t=a(85893),i=a(93454),c=a(96788),u=a(80539),l=a(60990),h=a(51015),r=a(67294),o=a(64577),d=a(96216),s=a(85871),g=a(5152),m=a.n(g),_=a(95906),p=a(5531),b=a(72246),y=a(11163);let x=m()(()=>Promise.all([a.e(4028),a.e(6002),a.e(9269),a.e(3701),a.e(4464),a.e(649),a.e(6578),a.e(7679),a.e(7531),a.e(723),a.e(776),a.e(2573),a.e(3355),a.e(3385),a.e(364)]).then(a.bind(a,3385)),{loadableGenerated:{webpack:()=>[3385]},ssr:!1});e.default=n=>{let{data:e=[],initConsType:a=0,center:g=[15,108.79],zoom:m=10.5,onChangeType:v}=n,[k]=(0,r.useState)(g),[f]=(0,r.useState)(m),[N,T]=(0,r.useState)(!0),{consFilter:C}=(0,_.Z)(),Z=(0,p.B)(a).initialItems,[j,S]=(0,r.useState)([]),[w,A]=(0,r.useState)(Z),[I,q]=(0,r.useState)([]),[K,L]=(0,r.useState)(!1),D=(0,y.useRouter)(),X=D.query.page,E="ban-do"===D.query.type;return(0,r.useEffect)(()=>{async function n(){S((await o.congtrinhService.getAll({...C,pageNumber:1,pageSize:1e3})).items)}"cong-trinh"===X&&E||!["giam-sat","quan-trac"].includes(X)?n():S(e)},[v]),(0,r.useEffect)(()=>{if(!j.length||!w.length){q([]);return}let n=new Set(w.map(n=>n.toLowerCase()));q(j.filter(e=>{var a,t;let i=(null===(t=e.loaiCT)||void 0===t?void 0:null===(a=t.maLoaiCT)||void 0===a?void 0:a.toString().toLowerCase())||"";return n.has(i)}))},[j,w]),(0,t.jsxs)(i.Z,{elevation:3,sx:{position:"relative",height:"calc(100vh - 170px)"},children:[(0,t.jsx)(i.Z,{elevation:3,sx:{py:.5,textAlign:"center"},children:(0,t.jsx)(c.Z,{variant:"overline",sx:{fontWeight:"bold"},children:"Bản đồ trạng th\xe1i c\xf4ng tr\xecnh"})}),(0,t.jsx)(u.Z,{in:N,children:(0,t.jsx)(l.Z,{className:"map-legend",sx:{background:"white"},children:(0,t.jsx)(b.Z,{consType:a,selectedItems:w,onTypeChange:n=>{A(n),null==v||v(n)},showLabel:K,setShowLabel:L})})}),(0,t.jsx)(h.Z,{className:"toggle-legend",variant:"outlined",onClick:()=>T(n=>!n),children:N?(0,t.jsx)(d.Z,{}):(0,t.jsx)(s.Z,{})}),(0,t.jsx)(x,{center:k,zoom:f,showLabel:K,mapData:I})]})}}}]);