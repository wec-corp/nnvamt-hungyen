"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{448:function(e,n,l){var i=l(85893),a=l(89090),t=l(21038),s=l(60990),o=l(52857),c=l(51423),r=l(44723),d=l(49986),h=l(51015),u=l(67294),g=l(64577);n.Z=e=>{let{url:n,data:l,setPostSuccess:x}=e,[b,f]=(0,u.useState)(null),j=!!b,m=()=>{f(null)},Z=async e=>{let l=e.id;await (0,g.deleteData)("".concat(n),l),"function"==typeof x&&x(!0)},p=(0,u.useRef)(!0);return(0,u.useEffect)(()=>(p.current=!0,()=>{p.current=!1}),[]),(0,i.jsx)(t.Z,{title:"X\xf3a bản ghi?",children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(o.Z,{"aria-describedby":null==l?void 0:l.id,className:"tableActionBtn deleteBtn",onClick:e=>{f(e.currentTarget)},"data-row-id":null==l?void 0:l.id,size:"small",children:(0,i.jsx)(a.Z,{})}),(0,i.jsx)(c.ZP,{id:j?null==l?void 0:l.id:void 0,open:j,anchorEl:b,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsxs)(r.Z,{severity:"warning",children:["X\xf3a bản ghi n\xe0y ?",(0,i.jsx)(s.Z,{sx:{justifyContent:"center",paddingTop:4,width:"100%"},children:(0,i.jsxs)(d.Z,{variant:"outlined","aria-label":"outlined button group",children:[(0,i.jsx)(h.Z,{size:"small",onClick:()=>{b&&l&&Z(l),f(null)},children:"Đ\xfang"}),(0,i.jsx)(h.Z,{color:"error",size:"small",onClick:m,children:"Hủy"})]})})]})})]})})}},70409:function(e,n,l){l.r(n);var i=l(85893),a=l(67294),t=l(5152),s=l.n(t),o=l(64577),c=l(96788),r=l(60990),d=l(68573),h=l(93454),u=l(56894),g=l(65806),x=l(12166),b=l(39892),f=l(448),j=l(85622),m=l(23759),Z=l(11461);let p=s()(()=>Promise.all([l.e(4028),l.e(9269),l.e(7679),l.e(2573),l.e(2527),l.e(7318)]).then(l.bind(l,32527)),{loadableGenerated:{webpack:()=>[32527]},ssr:!1});n.default=()=>{let[e,n]=(0,a.useState)([]),[l,t]=(0,a.useState)([15.012172,108.676488]),[s,N]=(0,a.useState)(9),[S,v]=(0,a.useState)(null),[C,w]=(0,a.useState)(!1),[y,D]=(0,a.useState)(!1),[P,k]=(0,a.useState)(!1),T=()=>{k(e=>!e)},[_,E]=(0,a.useState)({phanDoan:""}),L=(0,a.useRef)(null),z=(0,a.useCallback)(async e=>{v(e),console.log(e.fileKML);try{let n=await (0,m.N)("".concat(e.fileKML)),l=(0,m.M)(n);l&&(t([l.center[0],l.center[1]]),N(l.zoom)),L.current&&L.current.scrollIntoView({behavior:"smooth"})}catch(e){console.error("Error loading KML:",e)}},[]),G=[{id:"stt",label:"STT"},{id:"phanDoan",label:"Ph\xe2n đoạn s\xf4ng",align:"left",minWidth:190,elm:e=>(0,i.jsx)(c.Z,{className:"btnShowFilePdf",onClick:()=>z(e),children:null==e?void 0:e.phanDoan})},{id:"luuVucSong",label:"Lưu vực s\xf4ng",align:"left",minWidth:150},{id:"song",label:"S\xf4ng",align:"left",minWidth:150},{id:"tenDoanSong",label:"T\xean đoạn s\xf4ng",align:"left",minWidth:200},{id:"#",label:"Tọa độ (VN2000, m\xfai chiếu 30, kinh tuyến trục 107045’)",children:[{id:"xDau",label:"Điểm đầu X"},{id:"yDau",label:"Điểm đầu Y"},{id:"xCuoi",label:"Điểm cuối X"},{id:"xCuoi",label:"Điểm cuối Y"}]},{id:"diaGioiHanhChinh",label:"Địa giới h\xe0nh ch\xednh",align:"left"},{id:"mucDichSuDung",label:(0,i.jsxs)(r.Z,{children:["Mục đ\xedch sử dụng nước ",(0,i.jsx)("br",{})," theo QCVN 08:2023/BTNMT"]}),align:"left"},{id:"chatLuongNuoc",label:(0,i.jsxs)(r.Z,{children:["CLN ",(0,i.jsx)("br",{})," theo ",(0,i.jsx)("br",{})," QCVN 08:2023"]}),align:"left"},{id:"ghiChu",label:"Ghi ch\xfa",align:"left"},{id:"actions",label:"Thao t\xe1c",align:"center",pinned:"right"}];return(0,a.useEffect)(()=>{(async function(){D(!0),await (0,o.getData)("PhanDoanSong/danh-sach",_).then(e=>{console.log(e),n(e)}).catch(e=>{console.log(e)}).finally(()=>{D(!1)})})()},[P,_]),(0,a.useEffect)(()=>{S||(t([15.012172,108.68]),N(9.5))},[S]),(0,i.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(d.ZP,{item:!0,xs:12,md:12,ref:L,sx:{height:"55vh",overflow:"hidden"},children:(0,i.jsxs)(h.Z,{elevation:3,sx:{height:"100%",position:"relative"},children:[(0,i.jsx)(r.Z,{className:"map-legend",sx:{background:"white",px:2,zIndex:999,height:"auto",top:"15px"},children:(0,i.jsx)(u.Z,{children:(0,i.jsx)(g.Z,{sx:{m:0},control:(0,i.jsx)(x.Z,{sx:{p:1},onClick:()=>w(!C)}),label:"Hiển thị số thứ tự đoạn s\xf4ng"})})}),(0,i.jsx)(p,{center:l,zoom:s,mapData:S,dischargeData:e,selectedKmlFile:S?S.fileKML:null,loading:y,showLabel:C})]})}),(0,i.jsxs)(d.ZP,{xs:12,md:12,children:[(0,i.jsx)(d.ZP,{className:"_text_center",children:(0,i.jsx)(c.Z,{style:{color:"red",fontWeight:700},className:"font-weight-bold",sx:{mt:3},variant:"h6",children:"TỔNG HỢP PH\xc2N ĐOẠN S\xd4NG TỈNH QUẢNG NG\xc3I"})}),(0,i.jsxs)(h.Z,{elevation:3,sx:{p:0,height:"100%"},children:[(0,i.jsx)(Z.Z,{onChange:(e,n)=>{E(e),void 0!==n&&k(n)},tabId:"pds"}),(0,i.jsx)(b.Z,{columns:G,rows:e,id:"phan_doan_song",loading:y,pagination:!0,actions:e=>(0,i.jsxs)(r.Z,{className:"group_btn",children:[(0,i.jsx)(j.Z,{isEdit:!0,data:e,setPostSuccess:T}),(0,i.jsx)(f.Z,{url:"PhanDoanSong",data:e,setPostSuccess:T})]})})]})]})]})}}}]);